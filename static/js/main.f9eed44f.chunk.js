(this.webpackJsonpviade_en2b=this.webpackJsonpviade_en2b||[]).push([[0],{1078:function(e,t){},1079:function(e,t){},1165:function(e,t,n){},1181:function(e,t,n){},1182:function(e,t,n){},1183:function(e,t,n){},1187:function(e,t,n){},1203:function(e,t,n){},1204:function(e,t,n){},1205:function(e,t,n){},1223:function(e,t,n){},1224:function(e,t,n){},1225:function(e,t,n){},1351:function(e,t,n){},1352:function(e,t,n){},1353:function(e,t,n){},1376:function(e,t,n){},1377:function(e,t,n){},1378:function(e,t,n){},1385:function(e,t){},1387:function(e,t){},1425:function(e,t){},1427:function(e,t){},1468:function(e,t){},1471:function(e,t){},1480:function(e,t){},1481:function(e,t){},1511:function(e,t){},1597:function(e,t,n){},1617:function(e,t,n){},1619:function(e,t,n){},1620:function(e,t,n){},1621:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(75),s=n.n(o),i=(n(783),n(8)),c=n(10),l=n(18),u=n(19),p=n(44),m=n(153),d=(n(765),n(737),n(60)),f=(n(238),function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){return r.a.createElement("button",{className:this.props.className,name:this.props.name,onClick:this.props.onClick},this.props.message)}}]),n}(a.Component)),h=n(204),g=(n(788),n(1)),v=n.n(g),b=n(11),y=function e(t,n){Object(i.a)(this,e),this.lat=t,this.lng=n},w=function(){function e(t,n,a){Object(i.a)(this,e),this.name=t,this.description=a,this.geoCoordinates=Array.from(n),this.url="",this.jsonFormat="",this.commentsUrl="",this.comments=[]}return Object(c.a)(e,[{key:"setUrl",value:function(e){this.url=e}},{key:"setJsonFormat",value:function(e){this.jsonFormat=e}},{key:"getJson",value:function(){return this.jsonFormat}}]),e}(),x=n(30),E=n(48),k=n.n(E),O=(n(793),new k.a(x,{enableLogging:!0}));function j(e,t){return N.apply(this,arguments)}function N(){return(N=Object(b.a)(v.a.mark((function e(t,n){var a,r,o;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.trim(),o="\n  @prefix : <#>.\n  @prefix n0: <http://www.w3.org/ns/auth/acl#>.\n  @prefix ".concat(r=a+"",": <./>.\n  @prefix n1: <http://xmlns.com/foaf/0.1/>.\n  @prefix c: </profile/card#>.\n\n  :ControlReadWrite\n      a n0:Authorization;\n      n0:accessTo ").concat(r,":;\n      n0:agent c:me;\n      n0:default ").concat(r,":;\n      n0:mode n0:Control, n0:Read, n0:Write.\n  "),e.prev=3,e.next=6,O.createFile(t+".acl",o,"text/turtle").then().catch((function(e){console.log("It looks like we can not create necessary folders inside your pod"+t+n)}));case 6:console.log("CREATED ACL "+t),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),console.log("THE ACL COULD NOT BE ADDED ");case 12:case"end":return e.stop()}}),e,null,[[3,9]])})))).apply(this,arguments)}function T(e){return S.apply(this,arguments)}function S(){return(S=Object(b.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"\n  @prefix : <#>.\n  @prefix n0: <http://www.w3.org/ns/auth/acl#>.\n  @prefix inbox: <./>.\n  @prefix n1: <http://xmlns.com/foaf/0.1/>.\n  @prefix c: </profile/card#>.\n\n  :Append\n      a n0:Authorization;\n      n0:accessTo inbox:;\n      n0:agentClass n1:Agent;\n      n0:default inbox:;\n      n0:mode n0:Append.\n  :ControlReadWrite\n      a n0:Authorization;\n      n0:accessTo inbox:;\n      n0:agent c:me;\n      n0:default inbox:;\n      n0:mode n0:Control, n0:Read, n0:Write.\n  ",e.prev=1,e.next=4,O.createFile(t+".acl","\n  @prefix : <#>.\n  @prefix n0: <http://www.w3.org/ns/auth/acl#>.\n  @prefix inbox: <./>.\n  @prefix n1: <http://xmlns.com/foaf/0.1/>.\n  @prefix c: </profile/card#>.\n\n  :Append\n      a n0:Authorization;\n      n0:accessTo inbox:;\n      n0:agentClass n1:Agent;\n      n0:default inbox:;\n      n0:mode n0:Append.\n  :ControlReadWrite\n      a n0:Authorization;\n      n0:accessTo inbox:;\n      n0:agent c:me;\n      n0:default inbox:;\n      n0:mode n0:Control, n0:Read, n0:Write.\n  ","text/turtle").then().catch((function(e){console.log("It looks like we can not create necessary folders inside your pod")}));case 4:console.log("CREATED ACL INBOX"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),alert(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}function C(e,t){return I.apply(this,arguments)}function I(){return(I=Object(b.a)(v.a.mark((function e(t,n){var a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.trim(),r="\n  @prefix : <#>.\n  @prefix n0: <http://www.w3.org/ns/auth/acl#>.\n  @prefix n1: <http://xmlns.com/foaf/0.1/>.\n  @prefix c: </profile/card#>.\n\n  :ControlReadWrite\n      a n0:Authorization;\n      n0:accessTo <".concat(a+"",">;\n      n0:agent c:me;\n      n0:mode n0:Control, n0:Read, n0:Write.\n  "),e.prev=3,e.next=6,O.createFile(t+".acl",r,"text/turtle").then().catch((function(e){console.log("It looks like we can not create necessary folders inside your pod"+t+n)}));case 6:console.log("CREATED ACL "+t),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),console.log("THE ACL COULD NOT BE ADDED ");case 12:case"end":return e.stop()}}),e,null,[[3,9]])})))).apply(this,arguments)}function F(e,t){return R.apply(this,arguments)}function R(){return(R=Object(b.a)(v.a.mark((function e(t,n){var a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.replace(" ","%20"),r="\n  @prefix : <#>.\n  @prefix n0: <http://www.w3.org/ns/auth/acl#>.\n  @prefix n1: <http://xmlns.com/foaf/0.1/>.\n  @prefix c: </profile/card#>.\n\n  :ControlReadWrite\n      n0:accessTo <".concat(a+"",">;\n      n0:agent c:me;\n      n0:mode n0:Control, n0:Read, n0:Write.\n  "),e.prev=3,e.next=6,O.createFile(t+".acl",r,"text/turtle").then().catch((function(e){console.log("It looks like we can not create necessary folders inside your pod"+t+n)}));case 6:console.log("CREATED ACL COMMENTS "+t),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),console.log("THE ACL COULD NOT BE ADDED ");case 12:case"end":return e.stop()}}),e,null,[[3,9]])})))).apply(this,arguments)}var A=new k.a(x,{enableLogging:!0}),P=function(e,t){!function(e,t){D.apply(this,arguments)}(e,t)};function D(){return(D=Object(b.a)(v.a.mark((function e(t,n){var a,r,o,s;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.currentSession();case 2:if((a=e.sent)&&void 0!==a.webId&&null!==a.webId){e.next=5;break}throw new Error("You are not logged in.");case 5:return r=new File([n],t+".jsonld",{type:"application/ld+json"}),o=a.webId.split("profile")[0],s="".concat(o,"viade/routes/").concat(r.name),e.next=10,A.createFile(s,r,r.type);case 10:C(s,r.name);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var L=function(){function e(){Object(i.a)(this,e)}return Object(c.a)(e,[{key:"addComment",value:function(){var e=Object(b.a)(v.a.mark((function e(t,a,r){var o,s,i,c,l,u;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=n(30),s=n(48),i=new s(o),e.next=5,o.currentSession();case 5:if((c=e.sent)&&void 0!==c.webId&&null!==c.webId){e.next=9;break}return r(),e.abrupt("return",!1);case 9:return e.prev=9,e.next=12,i.createFile(t,JSON.stringify(a),"text/plain");case 12:return l=t.split("/"),u=l[l.length-1],this.checkAclOrCreateAclComments(t,u),e.abrupt("return",!0);case 18:return e.prev=18,e.t0=e.catch(9),console.log("Comments file for the route couldn't be created"),console.log(e.t0),console.log(e.t0.status),console.log(e.t0.message),e.abrupt("return",!1);case 25:case"end":return e.stop()}}),e,this,[[9,18]])})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"checkAclOrCreateAclComments",value:function(e,t){var a=n(30);new(n(48))(a).itemExists(e).then().catch((function(e){}))||F(e,t)}}]),e}(),U=function(){function e(){Object(i.a)(this,e)}return Object(c.a)(e,[{key:"createCommentsFile",value:function(){var e=Object(b.a)(v.a.mark((function e(t,a){var r,o,s,i,c,l;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n(30),o=n(48),s=new o(r),e.next=5,r.currentSession();case 5:return(i=e.sent)&&void 0!==i.webId&&null!==i.webId||a(),e.prev=7,c=i.webId.substring(0,i.webId.length-16)+"/viade/comments/"+t+"Comments",l={"@context":{"@version":1.1,comments:{"@container":"@list","@id":"viade:comments"},comment:{"@id":"viade:comment","@type":"@id"},author:{"@id":"schema:author","@type":"@id"},dateCreated:{"@id":"viade:dateCreated","@type":"xsd:date"},text:{"@id":"viade:text","@type":"xsd:string"},viade:"http://arquisoft.github.io/viadeSpec/",xsd:"http://www.w3.org/2001/XMLSchema#"},comments:[]},e.next=12,s.createFile(c+".jsonld",JSON.stringify(l),"text/plain");case 12:return e.abrupt("return",c);case 15:return e.prev=15,e.t0=e.catch(7),console.log("The comments file couldn't be created"),console.log(e.t0),console.log(e.t0.status),console.log(e.t0.message),e.abrupt("return","");case 22:return e.abrupt("return","");case 23:case"end":return e.stop()}}),e,null,[[7,15]])})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),M=function e(t,n,a,r){Object(i.a)(this,e),this.jsonComment={fileUrl:t,text:n,author:a,dateCreated:r}},_=function(){function e(){Object(i.a)(this,e)}return Object(c.a)(e,[{key:"loadComments",value:function(){var e=Object(b.a)(v.a.mark((function e(t,n){var a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=[],!t){e.next=6;break}return e.next=4,this.loadCommentsJson(t,n);case 4:(r=e.sent).comments&&(a=this.parseJsonToEntity(t,r.comments));case 6:return e.abrupt("return",a);case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"loadCommentsJson",value:function(){var e=Object(b.a)(v.a.mark((function e(t,a){var r,o,s,i,c,l;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n(30),o=n(48),s=new o(r),e.next=5,r.currentSession();case 5:return(i=e.sent)&&void 0!==i.webId&&null!==i.webId||a(),e.prev=7,e.next=10,s.itemExists(t);case 10:if(!e.sent){e.next=22;break}return e.prev=11,e.next=14,s.readFile(t);case 14:return c=e.sent,l=JSON.parse(c),e.abrupt("return",l);case 19:e.prev=19,e.t0=e.catch(11),console.log("Comment couldn't be parsed");case 22:e.next=29;break;case 24:return e.prev=24,e.t1=e.catch(7),console.log(e.t1),console.log("Comments couldn't be loaded"),e.abrupt("return","");case 29:case"end":return e.stop()}}),e,null,[[7,24],[11,19]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"parseJsonToEntity",value:function(e,t){for(var n=[],a=0;a<t.length;a++){var r=new M(e,t[a].jsonComment.text,t[a].jsonComment.author,t[a].dateCreated);n.push(r)}return n}}]),e}();function G(e,t){return W.apply(this,arguments)}function W(){return(W=Object(b.a)(v.a.mark((function e(t,n){var a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new U,e.next=3,a.createCommentsFile(t,n);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(){return(J=Object(b.a)(v.a.mark((function e(t,n){var a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new _,e.next=3,a.loadComments(t,n);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(e,t,n){return V.apply(this,arguments)}function V(){return(V=Object(b.a)(v.a.mark((function e(t,n,a){var r,o,s,i,c,l,u;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new _,e.next=3,r.loadCommentsJson(t,a);case 3:if(o=e.sent,s=new Date,i=s.getFullYear()+"-"+(s.getMonth()+1)+"-"+s.getDate(),c=s.getHours()+":"+s.getMinutes()+":"+s.getSeconds(),l=i+", "+c,n.dateCreated=l,void 0===o.comments){e.next=16;break}return o.comments.push(n),u=new L,e.next=14,u.addComment(t,o,a);case 14:e.sent?console.log("New comment was posted succesfully"):console.log("The comment wasn't posted");case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var H=function(e){z(e).then((function(t){P(e.name,t)}))};function z(e){return Y.apply(this,arguments)}function Y(){return(Y=Object(b.a)(v.a.mark((function e(t){var n,a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n='{"@context": {"@version": 1.1,"comments": { "@container": "@list", "@id": "viade:comments" },"description": { "@id": "schema:description", "@type": "xs:string"},"media": { "@container": "@list", "@id": "viade:media" },"name": { "@id": "schema:name", "@type": "xs:string" },"points": { "@container": "@list", "@id": "viade:points" },"latitude": { "@id": "schema:latitude", "@type": "xs:double" },"longitude": { "@id": "schema:longitude", "@type": "xs:double" },"rdf": "http://www.w3.org/1999/02/22-rdf-syntax-ns#","rdfs": "http://www.w3.org/2000/01/rdf-schema#","schema": "http://schema.org/","viade": "http://arquisoft.github.io/viadeSpec/","xsd": "http://www.w3.org/2001/XMLSchema#"},',e.next=3,G(t.name);case 3:return e.t0=e.sent,a=e.t0+".jsonld",n+='"name" : "'+t.name+'",',n+='"description" : "'+t.description+'",',n+='"points" : [',r=[],t.geoCoordinates.map((function(e){r.includes(e)?console.log(e+"Already exists in the route"):(r.push(e),n+='{"latitude" : '+e.lat+",",n+='"longitude" : '+e.lng,n+="},")})),n=n.substring(0,n.length-1),n+='], "comments": "'+a+'"}',console.log(n),e.abrupt("return",n);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var X=function(){!function(){Q.apply(this,arguments)}()},q=function(){K.routeIsOver=!0,K.putNameToRoute("finalTest"),console.log(K.getRouteNotUpload()),localStorage.setItem("routePreview",JSON.stringify(K.getRouteNotUpload()))},Z=function(e,t){K.putNameToRoute(e,t),K.getRoute()},$=function(){return K.routeIsOver},K=new(function(){function e(){Object(i.a)(this,e),this.geoCoordinates=[],this.nameRoute="",this.descriptionRoute="",this.routeIsOver=!1}return Object(c.a)(e,[{key:"addCoords",value:function(e){this.checkCoordsAlreadyExist(e)||(this.geoCoordinates.push(e),console.log(e))}},{key:"checkCoordsAlreadyExist",value:function(e){var t=!1;return this.geoCoordinates.map((function(n){return n.lat===e.lat&&n.lng===e.lng&&(t=!0),0})),t}},{key:"putNameToRoute",value:function(e,t){this.nameRoute=e,this.descriptionRoute=t}},{key:"getRouteNotUpload",value:function(){return new w(this.nameRoute,this.geoCoordinates,this.descriptionRoute)}},{key:"getRoute",value:function(){var e=new w(this.nameRoute,this.geoCoordinates,this.descriptionRoute);console.log(e),H(e)}},{key:"resetRoute",value:function(){this.geoCoordinates=[],this.nameRoute="",this.descriptionRoute=""}}]),e}());function Q(){return(Q=Object(b.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(K.routeIsOver){e.next=6;break}return navigator.geolocation.getCurrentPosition((function(e){ee(e.coords.latitude,e.coords.longitude)}),ne,ae),e.next=4,te(2e3);case 4:e.next=0;break;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ee(e,t){var n=e,a=t;K.addCoords(new y(n,a))}function te(e){return new Promise((function(t){return setTimeout(t,e)}))}function ne(e){console.warn("ERROR(".concat(e.code,"): ").concat(e.message))}var ae={enableHighAccuracy:!1,timeout:5e7,maximumAge:0},re=n(42),oe=(n(1165),function(e){var t=Object(m.g)(),n=Object(a.useState)(!1),o=Object(d.a)(n,2),s=o[0],i=o[1];return r.a.createElement(h.b,{className:"mainButton",event:"click",icon:r.a.createElement("i",{className:"fa fa-plus fafab"})},r.a.createElement(h.a,{className:"actionButton",text:"Add route"},r.a.createElement("i",{className:"fa fa-map-pin fafab"})),r.a.createElement(h.a,{className:"actionButton",text:"Take Photo",onClick:e.showUpload},r.a.createElement("i",{className:"fa fa-camera fafab"})),s?r.a.createElement(h.a,{className:"actionButton",text:"Stop",onClick:function(){return re.c.info("Route recording stopped",{draggable:!0,position:re.c.POSITION.TOP_CENTER}),i(!1),q(),void t.push("/saveroute")}},r.a.createElement("i",{className:"fa fas fa-stop"})):r.a.createElement(h.a,{className:"actionButton",text:"Record",onClick:function(){return re.c.info("Route recording started",{draggable:!0,position:re.c.POSITION.TOP_CENTER}),i(!0),void X()}},r.a.createElement("i",{className:"fa fa-circle"})))}),se=n(742),ie=(n(1181),{dark:!1,switchTheme:function(){this.dark=!this.dark}});n(1182);function ce(){ie.switchTheme(),ie.dark?document.documentElement.setAttribute("data-theme","dark"):document.documentElement.setAttribute("data-theme","")}var le=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{id:"lightmode",className:"menu-item"},r.a.createElement("span",{className:"toggle"},"Dark mode"),r.a.createElement("label",{className:"switch"},r.a.createElement("input",{className:"theme-switch",type:"checkbox",defaultChecked:ie.dark,onClick:ce}),r.a.createElement("span",{className:"slider round"})))}}]),n}(a.Component),ue=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"showSettings",value:function(e){e.preventDefault()}},{key:"render",value:function(){return r.a.createElement(se.slide,{disableAutoFocus:!0,className:"bm-menu",pageWrapId:this.props.pageWrapId,outerContainerId:this.props.container},r.a.createElement("nav",{className:"bm-item-list"},r.a.createElement("h2",{className:"bm-item",tabIndex:"0"},r.a.createElement("img",{className:"fa fa-fw fa-2x",src:"ViaDe.png"}),r.a.createElement("span",null," ViaDe")),r.a.createElement(p.a,null,r.a.createElement(p.b,{id:"home",className:"menu-item",to:"/"},r.a.createElement("i",{className:"fa fa-fw fas fa-map"}),r.a.createElement("span",null,"Home")),r.a.createElement(p.b,{id:"add-route",className:"menu-item",to:"/notifications"},r.a.createElement("i",{className:"fa fa-fw far fa-bell"}),r.a.createElement("span",null,"Notifications")),r.a.createElement(p.b,{id:"list-routes",className:"menu-item",to:"/routes"},r.a.createElement("i",{className:"fa fa-fw far fa-list-alt"}),r.a.createElement("span",null,"List Routes")),r.a.createElement(p.b,{id:"list-friends",className:"menu-item",to:"/friends-list"},r.a.createElement("i",{className:"fa fa-fw fas fa-user"}),r.a.createElement("span",null,"List Friends")),r.a.createElement(p.b,{id:"groups-friends",className:"menu-item",to:"/groups"},r.a.createElement("i",{className:"fa fa-fw fas fa-users"}),r.a.createElement("span",null,"Friend Groups")),r.a.createElement(p.b,{id:"gpx",className:"menu-item",to:"/gpx"},r.a.createElement("i",{className:"fa fa-fw fas fa-cubes"}),r.a.createElement("span",null,"Import GPX")),r.a.createElement(p.b,{id:"about",className:"menu-item",to:"/about"},r.a.createElement("i",{className:"fa fa-fw fas fa-info-circle"}),r.a.createElement("span",null,"About")),r.a.createElement(le,null))))}}]),n}(a.Component),pe=(n(1183),n(236)),me=function(e){return e?[{elementType:"labels.icon",stylers:[{visibility:"on"}]},{elementType:"labels.text.fill",stylers:[{color:"#000000"},{lightness:60}]},{elementType:"labels.text.stroke",stylers:[{color:"#000000"},{weight:2}]},{featureType:"administrative.land_parcel",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"administrative.neighborhood",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"administrative.province",elementType:"geometry.stroke",stylers:[{color:"#000000"}]},{featureType:"landscape",elementType:"geometry",stylers:[{color:"#000000"},{lightness:25}]},{featureType:"poi",elementType:"geometry",stylers:[{saturation:-75},{lightness:-75}]},{featureType:"poi",elementType:"labels.icon",stylers:[{saturation:-50}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{featureType:"poi.attraction",stylers:[{visibility:"off"}]},{featureType:"poi.business",stylers:[{visibility:"off"}]},{featureType:"poi.government",stylers:[{visibility:"off"}]},{featureType:"poi.medical",elementType:"geometry",stylers:[{visibility:"off"}]},{featureType:"poi.park",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"}]},{featureType:"poi.place_of_worship",stylers:[{visibility:"off"}]},{featureType:"poi.school",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#999999"},{visibility:"simplified"}]},{featureType:"road",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"},{lightness:-15}]},{featureType:"road",elementType:"labels.text.stroke",stylers:[{lightness:-15}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{color:"#000000"},{lightness:15}]},{featureType:"road.arterial",elementType:"labels.icon",stylers:[{saturation:-75}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#000000"},{lightness:15}]},{featureType:"road.local",stylers:[{visibility:"simplified"}]},{featureType:"road.local",elementType:"geometry",stylers:[{color:"#000000"},{lightness:15}]},{featureType:"road.local",elementType:"labels",stylers:[{visibility:"on"},{weight:1}]},{featureType:"transit",elementType:"geometry",stylers:[{lightness:-70}]},{featureType:"transit",elementType:"labels.icon",stylers:[{saturation:-50}]},{featureType:"transit.line",stylers:[{lightness:-20},{weight:.5}]},{featureType:"transit.station.airport",elementType:"geometry",stylers:[{lightness:-15}]},{featureType:"transit.station.airport",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"transit.station.bus",stylers:[{visibility:"off"}]},{featureType:"water",elementType:"geometry",stylers:[{saturation:-70},{lightness:-75}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"}]}]:[{elementType:"geometry",stylers:[{color:"#ebebeb"}]},{elementType:"labels.icon",stylers:[{visibility:"on"}]},{elementType:"labels.text.fill",stylers:[{color:"#616161"}]},{elementType:"labels.text.stroke",stylers:[{color:"#f5f5f5"}]},{featureType:"administrative.land_parcel",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"administrative.land_parcel",elementType:"labels.text.fill",stylers:[{color:"#bdbdbd"}]},{featureType:"administrative.locality",stylers:[{color:"#9e9e9e"},{visibility:"simplified"}]},{featureType:"administrative.neighborhood",elementType:"labels.text",stylers:[{visibility:"off"}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#eeeeee"}]},{featureType:"poi",elementType:"labels.icon",stylers:[{saturation:-70}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{featureType:"poi.attraction",stylers:[{visibility:"off"}]},{featureType:"poi.business",stylers:[{visibility:"off"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#c7e2c7"}]},{featureType:"poi.park",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"}]},{featureType:"poi.place_of_worship",stylers:[{visibility:"off"}]},{featureType:"poi.school",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#ffffff"},{visibility:"simplified"}]},{featureType:"road",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"labels.text",stylers:[{visibility:"on"}]},{featureType:"road.arterial",elementType:"labels.icon",stylers:[{saturation:-75}]},{featureType:"road.arterial",elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#dadada"}]},{featureType:"road.local",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"road.local",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"},{visibility:"on"}]},{featureType:"road.local",elementType:"labels.text.stroke",stylers:[{visibility:"off"}]},{featureType:"transit",stylers:[{saturation:-75},{lightness:20},{visibility:"on"}]},{featureType:"transit.line",stylers:[{color:"#e2e2e2"},{weight:.5}]},{featureType:"transit.station.airport",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"transit.station.bus",stylers:[{visibility:"off"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#bfdcf9"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"}]}]};var de=function(){return"AIzaSyBgV1zy9YSvClMQloue9b7pdd0sSfB8W9o"},fe=n(296),he=n.n(fe),ge=function e(t,n){Object(i.a)(this,e),this.filePath=t,this.dateAttached=new Date(n),this.contentType=he.a.getType(this.filePath)},ve=n(36),be=function(){function e(t,n){Object(i.a)(this,e),this.routePath=t,this.files=Object(ve.a)(n)}return Object(c.a)(e,[{key:"hasPath",value:function(e){return this.files.includes(e)}},{key:"addFilePath",value:function(e){this.files.includes(e)||(this.files=[].concat(Object(ve.a)(this.files),[e]))}},{key:"removeFilePath",value:function(e){this.files=this.files.filter((function(t){return t!==e}))}}]),e}(),ye=function(){function e(){Object(i.a)(this,e)}return Object(c.a)(e,[{key:"loadUserRoutesFiles",value:function(){var e=Object(b.a)(v.a.mark((function e(t){var a,r,o,s,i,c,l,u,p,m,d,f;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n(30),r=n(48),o=new r(a),s=[],i=[],e.next=7,a.currentSession();case 7:if((c=e.sent)&&void 0!==c.webId&&null!==c.webId){e.next=11;break}return t(),e.abrupt("return",{routes:[],files:[]});case 11:return localStorage.setItem("session",JSON.stringify(c)),l=c.webId.substring(0,c.webId.length-16)+"/viade/routes/",e.next=15,o.itemExists(l).then().catch((function(e){console.log("It looks like we can not access to the path "+l)}));case 15:return e.next=17,o.itemExists(l).then().catch((function(e){console.log("It looks like we can not access to the path "+l)}));case 17:if(!e.sent){e.next=43;break}return e.prev=18,e.next=21,o.readFolder(l);case 21:u=e.sent,p=u.files,m=0;case 24:if(!(m<p.length)){e.next=33;break}return e.next=27,o.readFile(p[m].url);case 27:d=e.sent,i.push(p[m].url),s.push(d);case 30:m++,e.next=24;break;case 33:e.next=41;break;case 35:e.prev=35,e.t0=e.catch(18),console.log("The folder couldn't be read"),console.log(e.t0),console.log(e.t0.status),console.log(e.t0.message);case 41:e.next=44;break;case 43:console.log("user has no routes directory");case 44:return f=this.jsonToEntity(this.routesToJson(s,i),i),localStorage.setItem("urls",JSON.stringify(i)),e.abrupt("return",f);case 47:case"end":return e.stop()}}),e,this,[[18,35]])})));return function(t){return e.apply(this,arguments)}}()},{key:"loadRouteByName",value:function(){var e=Object(b.a)(v.a.mark((function e(t,a){var r,o,s,i,c,l,u,p,m,d,f,h;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n(30),o=n(48),s=new o(r),e.next=5,r.currentSession();case 5:if(i=e.sent,"https://solid.community/common/popup.html",i&&void 0!==i.webId&&null!==i.webId){e.next=10;break}return a(),e.abrupt("return",void 0);case 10:return c=i.webId.substring(0,i.webId.length-16)+"/viade/routes/",e.next=13,s.itemExists(c);case 13:if(!e.sent){e.next=53;break}return e.prev=14,e.next=17,s.readFolder(c);case 17:l=e.sent,u=l.files,p=0;case 20:if(!(p<u.length)){e.next=43;break}return e.next=23,s.readFile(u[p].url);case 23:if(m=e.sent,e.prev=24,(d=JSON.parse(m)).name!==t){e.next=35;break}return f=new w(d.name,d.points,d.description),h=void 0,h=void 0!=d.comments?d.commentsUrl:"",f.comments=h,f.setUrl(u[p].url),f.setJsonFormat(d),console.log("Match "+f.url),e.abrupt("return",f);case 35:e.next=40;break;case 37:e.prev=37,e.t0=e.catch(24),console.log("wrong json format");case 40:p++,e.next=20;break;case 43:e.next=51;break;case 45:e.prev=45,e.t1=e.catch(14),console.log("The folder couldn't be read"),console.log(e.t1),console.log(e.t1.status),console.log(e.t1.message);case 51:e.next=54;break;case 53:console.log("user has no routes directory");case 54:return e.abrupt("return",void 0);case 55:case"end":return e.stop()}}),e,null,[[14,45],[24,37]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"routesToJson",value:function(e,t){for(var n=[],a=0;a<e.length;a++)try{var r=JSON.parse(e[a]);n.push(r)}catch(o){t.splice(a,1),console.log("Route "+a+" couldn't be transformed to json because the format is wrong")}return n}},{key:"jsonToEntity",value:function(e,t){var n=[],a=[];console.table(e);for(var r=0;r<e.length;r++)try{console.log(e[r]);var o=e[r].name,s=e[r].points,i=e[r].description,c=void 0;c=e[r].hasOwnProperty("comments")&&void 0!=e[r].comments?e[r].comments:"";var l=new w(o,s,i);l.commentsUrl=c,l.setUrl(t[r]),l.setJsonFormat(e[r]),n.push(l),console.log("Route "+l.name+" was created succesfully"),e[r].media&&a.push(this.getMediaAttachedToRoute(e[r],t[r]))}catch(u){console.log("Route "+r+" couldn't be parsed because the format is wrong"),console.log(u)}return console.log(a),{routes:n,files:a}}},{key:"getMediaAttachedToRoute",value:function(e,t){for(var n=new be(t,[]),a=0;a<e.media.length;a++){var r=e.media[a]["@id"],o=new Date(e.media[a].dateTime),s=new ge(r,o);n.addFilePath(s)}return n}}]),e}(),we=function(){function e(){Object(i.a)(this,e)}return Object(c.a)(e,[{key:"deleteRouteByName",value:function(){var e=Object(b.a)(v.a.mark((function e(t){var a,r,o,s,i,c,l,u,p,m,d;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n(30),r=n(48),o=new r(a),t+=".json",e.next=6,a.currentSession();case 6:if(s=e.sent,"https://solid.community/common/popup.html",s&&void 0!==s.webId&&null!==s.webId){e.next=12;break}return e.next=11,a.popupLogin({popupUri:"https://solid.community/common/popup.html"});case 11:s=e.sent;case 12:return i=s.webId.substring(0,s.webId.length-16)+"/viade/routes/",e.next=15,o.itemExists(i);case 15:if(!e.sent){e.next=43;break}return e.prev=16,e.next=19,o.readFolder(i);case 19:c=e.sent,l=c.files,u=0;case 22:if(!(u<l.length)){e.next=32;break}if(p=l[u].url,m=p.split("/"),d=m[m.length-1],t!==d){e.next=29;break}return o.delete(p),e.abrupt("return",!0);case 29:u++,e.next=22;break;case 32:return e.abrupt("return",!1);case 35:e.prev=35,e.t0=e.catch(16),console.log("The folder couldn't be read"),console.log(e.t0),console.log(e.t0.status),console.log(e.t0.message);case 41:e.next=44;break;case 43:console.log("user has no routes directory");case 44:case"end":return e.stop()}}),e,null,[[16,35]])})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteRouteByUrl",value:function(){var e=Object(b.a)(v.a.mark((function e(t){var a,r,o,s,i,c,l,u,p;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n(30),r=n(48),o=new r(a),e.next=5,a.currentSession();case 5:if(s=e.sent,"https://solid.community/common/popup.html",s&&void 0!==s.webId&&null!==s.webId){e.next=11;break}return e.next=10,a.popupLogin({popupUri:"https://solid.community/common/popup.html"});case 10:s=e.sent;case 11:return i=s.webId.substring(0,s.webId.length-16)+"/public/Routes/",e.next=14,o.itemExists(i);case 14:if(!e.sent){e.next=40;break}return e.prev=15,e.next=18,o.readFolder(i);case 18:c=e.sent,l=c.files,u=0;case 21:if(!(u<l.length)){e.next=29;break}if(p=l[u].url,t!==p){e.next=26;break}return o.delete(p),e.abrupt("return",!0);case 26:u++,e.next=21;break;case 29:return e.abrupt("return",!1);case 32:e.prev=32,e.t0=e.catch(15),console.log("The folder couldn't be read"),console.log(e.t0),console.log(e.t0.status),console.log(e.t0.message);case 38:e.next=41;break;case 40:console.log("user has no routes directory");case 41:case"end":return e.stop()}}),e,null,[[15,32]])})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteRouteFromStorage",value:function(e){(new We).deleteRouteByName(e)}}]),e}(),xe=function(){function e(){Object(i.a)(this,e)}return Object(c.a)(e,[{key:"updatePod",value:function(){var e=Object(b.a)(v.a.mark((function e(t,a){var r,o,s,i;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n(30),o=n(48),s=new o(r),e.next=5,r.currentSession();case 5:if((i=e.sent)&&void 0!==i.webId&&null!==i.webId){e.next=9;break}return a(),e.abrupt("return",!1);case 9:return e.prev=9,e.next=12,s.createFile(t.url,JSON.stringify(t.jsonFormat),"application/json");case 12:return e.abrupt("return",!0);case 15:return e.prev=15,e.t0=e.catch(9),console.log("The route couldn't be updated"),console.log(e.t0),console.log(e.t0.status),console.log(e.t0.message),e.abrupt("return",!1);case 22:case"end":return e.stop()}}),e,null,[[9,15]])})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function Ee(e,t){return ke.apply(this,arguments)}function ke(){return(ke=Object(b.a)(v.a.mark((function e(t,n){var a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new ye,e.next=3,a.loadRouteByName(t,n);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Oe(e){return(new ye).loadUserRoutesFiles(e)}function je(e,t,n){return Ne.apply(this,arguments)}function Ne(){return(Ne=Object(b.a)(v.a.mark((function e(t,n,a){var r,o;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ee(t.name,a);case 2:if(null===(r=e.sent)||void 0===r){e.next=17;break}return r.name=n.name,r.jsonFormat.name=n.name,o=new xe,e.next=9,o.updatePod(r);case 9:if(!e.sent){e.next=15;break}return console.log("Pod was updated correctly"),e.abrupt("return",r);case 15:return console.log("Pod wasn't updated"),e.abrupt("return",void 0);case 17:return e.abrupt("return",void 0);case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Te=function(){var e=Object(b.a)(v.a.mark((function e(t){var n,a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n="",a="",console.group("handleFetchError"),!(t instanceof Response)){e.next=13;break}return e.next=6,t.text();case 6:n=e.sent,console.error("url: ".concat(t.url)),console.error("status: ".concat(t.status)),r={401:"The ressource at ".concat(t.url," requires you to login."),403:"You don't have permission to access the ressource at ".concat(t.url,".\n            Please make sure that you are logged in with the correct account.\n            If the server runs with version 5.0.0 or higher, make sure you gave this app read/write permission"),404:"The ressource at ".concat(t.url," was not found"),500:"An internal server error occured...\n            ".concat(n)},t.status in r&&(a=r[t.status]),e.next=14;break;case 13:t instanceof Error?(n=t.message,console.error(t.stack)):n="string"===typeof t?t:JSON.stringify(t);case 14:throw console.error("errorMessage: ".concat(n)),console.error("error: ".concat(t)),console.groupEnd(),new Error(a||n);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Se=new k.a(x,{enableLogging:!0}),Ce=function(){var e=Object(b.a)(v.a.mark((function e(t){var n,a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.currentSession();case 2:if((n=e.sent)&&void 0!==n.webId&&null!==n.webId){e.next=5;break}throw new Error("You are not logged in.");case 5:if(t.length){e.next=7;break}return e.abrupt("return",Promise.reject("No files to upload"));case 7:if(Fe(t)){e.next=10;break}return e.abrupt("return",Promise.reject("All files must be images or videos."));case 10:return a=n.webId.split("profile")[0],r=Array.from(t).map((function(e){var t="".concat(a,"viade/resources/").concat(e.name);return Ie(t,e,e.type||he.a.getType(e.name)).then((function(){return t}))})),e.abrupt("return",Promise.all(r).catch((function(e){Te(e)})));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ie=function(e,t,n){return Se.putFile(e,t,n).catch(Te)},Fe=function(e){var t=!0;return e.forEach((function(e){Re.isImage(e.name.toString())||Re.isVideo(e.name)||(t=!1)})),t},Re={isImage:function(e){return Ae.image.test(e)},isVideo:function(e){return Ae.video.test(e)}},Ae={image:/\.(jpe?g|gif|bmp|png|svg|tiff?)$/i,video:/\.(mp4|webm|ogg|avi)$/i},Pe=function(){var e=Object(b.a)(v.a.mark((function e(t){var n,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.currentSession();case 2:return n=e.sent,a=n.webId.split("profile")[0],e.abrupt("return",t.includes(a));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),De=function(){var e=Object(b.a)(v.a.mark((function e(t,n){var a,r,o,s,i,c;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new k.a(x,{enableLogging:!0}),e.next=3,x.currentSession();case 3:return r=e.sent,o=r.webId.split("profile")[0],s=o+"viade/routes/",i=(new Date).toISOString(),e.next=9,a.itemExists(s);case 9:if(!e.sent){e.next=15;break}return e.next=12,a.readFolder(o+"viade/routes/");case 12:c=e.sent,c.files.forEach(function(){var e=Object(b.a)(v.a.mark((function e(r){var o,s;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.url.match(n)){e.next=8;break}return e.next=3,a.readFile(r.url);case 3:o=e.sent,(s=JSON.parse(o)).media||(s.media=[]),t.forEach((function(e){s.media.push({"@id":e,dateTime:i})})),a.putFile(r.url,JSON.stringify(s),r.type).catch(Te);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 15:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();function Le(e,t){return Ue.apply(this,arguments)}function Ue(){return(Ue=Object(b.a)(v.a.mark((function e(t,n){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pe(t);case 2:if(!e.sent){e.next=9;break}return e.next=5,Ce(n);case 5:return a=e.sent,e.next=8,De(a,t);case 8:re.c.success("The file was correctly uploaded",{draggable:!0,position:re.c.POSITION.TOP_CENTER});case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Me(){return _e.apply(this,arguments)}function _e(){return(_e=Object(b.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ge={filePaths:[],uploadFiles:function(e){var t=this;return Object(b.a)(v.a.mark((function n(){var a,r,o;return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,We.getSelected();case 2:a=n.sent;try{r=t.filePaths.find((function(e){return e.routePath===a.url})),console.log(r),r?Le(r.routePath,e).then().catch((function(e){re.c.error("The file could not be uploaded. Try a .jpg, .png, etc...",{draggable:!0,position:re.c.POSITION.TOP_CENTER})})):(o=new be(a.url,[]),t.filePaths=[].concat(Object(ve.a)(t.filePaths),[o]),Le(o.routePath,e).then().catch((function(e){re.c.error("The file could not be uploaded. Try a .jpg, .png, etc...",{draggable:!0,position:re.c.POSITION.TOP_CENTER})})))}catch(s){re.c.error("We do not accept the format of this file. Try with a .jpg, .png, ...",{draggable:!0,position:re.c.POSITION.TOP_CENTER})}case 4:case"end":return n.stop()}}),n)})))()},addFilePaths:function(e){var t=this;e.forEach((function(e){t.filePaths.find((function(t){return t.routePath===e.routePath}))||t.filePaths.push(e)}))},removeFile:function(e,t){var n=this;return Object(b.a)(v.a.mark((function a(){return v.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n.filePaths.forEach((function(n){n.routePath===e.url&&n.hasPath(t)&&n.removeFilePath(t)})),a.next=3,Me(e,t);case 3:case"end":return a.stop()}}),a)})))()},getFilePathsForRoute:function(e){console.log(e),console.log(this.filePaths);var t=this.filePaths.find((function(t){return t.routePath===e.url}));return console.log(t),t?Object(ve.a)(t.files):[]}},We={routes:[],selected:"",selectedDetails:"",routeToUpload:"",reload:!1,selectedToShare:"",sharedRoutes:[],getSharedRoutes:function(){var e=this;return Object(b.a)(v.a.mark((function t(){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.sharedRoutes);case 1:case"end":return t.stop()}}),t)})))()},setSharedRoutes:function(e){this.sharedRoutes=e},getSelectedToShare:function(){return this.selectedToShare},setSelectedToShare:function(e){this.selectedToShare=e},getSelectedToUpload:function(){return this.routeToUpload},setSelectedToUpload:function(e){this.routeToUpload=e},addRoute:function(e){e&&!this.routes.find((function(t){return e.name===t.name}))&&this.routes.push(Object.assign({},e))},deleteRoute:function(e){var t;this.routes=this.routes.filter((function(t){return e.name!==t.name})),t=e.name,(new we).deleteRouteByName(t)},updateRoute:function(e,t,n){var a=this;return Object(b.a)(v.a.mark((function r(){var o;return v.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,je(e,t,n);case 2:null!==(o=r.sent)&&void 0!==o&&(a.routes=a.routes.filter((function(t){return e.name!==t.name})),a.routes.push(o),a.routes.sort((function(e,t){return e.name>t.name?1:e.name<t.name?-1:0})));case 4:case"end":return r.stop()}}),r)})))()},getRoutes:function(e){var t=this;return Object(b.a)(v.a.mark((function n(){var a;return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(0!==t.routes.length&&!t.reload){n.next=5;break}return n.next=3,Oe(e);case 3:(a=n.sent).routes.length>0?(t.routes=a.routes,Ge.addFilePaths(a.files)):t.routes=[];case 5:return n.abrupt("return",t.routes);case 6:case"end":return n.stop()}}),n)})))()},setSelected:function(e){var t=this.routes.find((function(t){return e.name===t.name})),n=this.sharedRoutes.find((function(t){return e.name===t.name}));if(t)return console.log("Route selected: ".concat(t)),void(this.selected=t);n?this.selected=n:((t=Ee(e))&&(this.routes.push(t),this.routes.sort((function(e,t){return e.name>t.name?1:e.name<t.name?-1:0}))),this.selected=t)},getSelected:function(){var e=this;return Object(b.a)(v.a.mark((function t(){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.selected);case 1:case"end":return t.stop()}}),t)})))()},clear:function(){this.routes=[],this.selected="",this.selectedDetails="",this.routeToUpload="",this.reload=!1,this.selectedToShare="",this.sharedRoutes=[]},setSelectedDetails:function(e){this.selectedDetails=e},getSelectedDetails:function(){return this.selectedDetails},setReload:function(e){this.reload=e}},Je=n(743),Be=n.n(Je),Ve=(n(1187),function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{className:"containerLoader"},r.a.createElement(Be.a,{type:"spin",color:"#509A50",className:"loader"}))}}]),n}(r.a.Component)),He=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).center={lat:43.362448,lng:-5.849005},a.route=[],a.zoom=15,a.viewLoaded=function(e,t){var n=[];if(localStorage.getItem("routePreview")){var o=JSON.parse(localStorage.getItem("routePreview")).geoCoordinates;o.forEach((function(e){n.push({lat:parseFloat(e.lat),lng:parseFloat(e.lng)})})),e=n}else e?((o=e.geoCoordinates).forEach((function(e){n.push({lat:parseFloat(e.latitude),lng:parseFloat(e.longitude)})})),e=n):e=a.route;return localStorage.removeItem("routePreview"),0!==e.length&&(a.center=e[Math.floor(e.length/2)]),r.a.createElement(pe.Map,{google:a.props.google,zoom:a.zoom,styles:me(t),streetViewControl:!1,mapTypeControl:!1,fullscreenControl:!1,zoomControl:!1,initialCenter:a.center},r.a.createElement(pe.Polyline,{path:e,strokeColor:"#717171",strokeOpacity:1,strokeWeight:.4*a.zoom}),r.a.createElement(pe.Marker,{title:"Start of route",name:"Start of route",position:e[0],opacity:1,icon:"https://arquisoft.github.io/viade_en2b/ViaDeSmall.png"}))},a.state={loading:!0,route:"",dark:ie.dark},a}return Object(c.a)(n,[{key:"setZoom",value:function(e){this.zoom=e}},{key:"componentDidMount",value:function(){var e=this;We.getSelected().then((function(t){e.setState({loading:!1,route:t,dark:ie.dark})}))}},{key:"render",value:function(){var e=this.state.loading;return r.a.createElement(r.a.Fragment,null,e?r.a.createElement(Ve,null):this.viewLoaded(this.state.route,this.state.dark))}}]),n}(r.a.Component),ze=Object(pe.GoogleApiWrapper)({apiKey:de(),language:"en-US"})(He),Ye=n(71),Xe=(n(1203),n(1204),function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).files=[],a.state={files:[]},a}return Object(c.a)(n,[{key:"componentDidUpdate",value:function(){var e=this;this.props.files.forEach((function(t){e.state.files.push(t),e.files.push(t)}))}},{key:"getIcon",value:function(e){var t=e.type;return t.includes("jpg")||t.includes("jpeg")||t.includes("png")?r.a.createElement("i",{className:"fa fas fa-camera-retro"}):r.a.createElement("i",{className:"fa far fa-map"})}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("ul",{className:"listMedia"},this.props.files.map((function(t,n){return r.a.createElement("li",{className:"mediaElement",key:n},e.getIcon(t),t.name)}))))}}]),n}(a.Component)),qe=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).state={hightlight:!1,files:[]},a.fileInputRef=r.a.createRef(),a.openFileDialog=a.openFileDialog.bind(Object(Ye.a)(a)),a.onFilesAdded=a.onFilesAdded.bind(Object(Ye.a)(a)),a.onDragOver=a.onDragOver.bind(Object(Ye.a)(a)),a.onDragLeave=a.onDragLeave.bind(Object(Ye.a)(a)),a.onDrop=a.onDrop.bind(Object(Ye.a)(a)),a.onUpload=a.onUpload.bind(Object(Ye.a)(a)),a}return Object(c.a)(n,[{key:"onUpload",value:function(e){if(e.preventDefault(),!this.props.disabled){var t=this.state.files;this.state.files&&(this.props.onUpload(t),this.props.hideUpload()),this.setState({highlight:!1})}}},{key:"openFileDialog",value:function(){this.props.disabled||this.fileInputRef.current.click()}},{key:"onFilesAdded",value:function(e){var t=this;if(e.preventDefault(),!this.props.disabled){var n=e.target.files;if(this.props.onFilesAdded){var a=this.fileListToArray(n);this.props.onFilesAdded(a),a.forEach((function(e){t.state.files.push(e)}))}this.setState({highlight:!1})}}},{key:"onDrop",value:function(e){var t=this;if(e.preventDefault(),!this.props.disabled){var n=e.dataTransfer.files;if(this.props.onFilesAdded){var a=this.fileListToArray(n);this.props.onFilesAdded(a),a.forEach((function(e){t.state.files.push(e)}))}this.setState({highlight:!1})}}},{key:"onDragOver",value:function(e){e.preventDefault(),this.props.disabled||this.setState({highlight:!0})}},{key:"onDragLeave",value:function(){this.setState({highlight:!1})}},{key:"fileListToArray",value:function(e){for(var t=[],n=0;n<e.length;n++)t.push(e.item(n));return t}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"Dropzone ".concat(this.state.hightlight?"Highlight":""),onDragOver:this.onDragOver,onDragLeave:this.onDragLeave,onDrop:this.onDrop,onClick:this.openFileDialog,style:{cursor:this.props.disabled?"default":"pointer"}},r.a.createElement("input",{ref:this.fileInputRef,className:"FileInput",type:"file",multiple:!0,onChange:this.onFilesAdded}),r.a.createElement("img",{alt:"upload",className:"Icon",src:"baseline-cloud_upload-24px.svg"}),r.a.createElement("a",null,"Upload file")),r.a.createElement(Xe,{files:this.state.files}),r.a.createElement("form",null,r.a.createElement(f,{className:"submitUpload buttonGeneric",value:"Upload file",onClick:this.onUpload,message:"Upload file"})))}}]),n}(a.Component),Ze=(n(598),function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handleClick=function(t){e.node.contains(t.target)||e.props.showUpload()},e}return Object(c.a)(n,[{key:"componentWillMount",value:function(){document.addEventListener("mousedown",this.handleClick,!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.handleClick,!1)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{ref:function(t){return e.node=t},className:"dropzonePage"},r.a.createElement("header",{className:"CardHeader"}),r.a.createElement("div",{className:"CardZone"},r.a.createElement(qe,{hideUpload:this.props.showUpload,onUpload:function(e){Ge.uploadFiles(Object(ve.a)(e)),We.setReload(!0)},onFilesAdded:function(){}})))}}]),n}(a.Component)),$e=(n(1205),function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).state={nameRoute:"",description:"",files:[]},a}return Object(c.a)(n,[{key:"descriptionToRoute",value:function(e){this.setState({description:e.target.value})}},{key:"nameToRute",value:function(e){this.setState({nameRoute:e.target.value})}},{key:"saveRouteToPod",value:function(){""!==this.state.nameRoute&&$()&&(Z(this.state.nameRoute,this.state.description),this.props.onFinish())}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{htmlFor:"textInput"},"Route Name"),r.a.createElement("input",{ref:this.fileInputRef,className:"textInput",type:"text",onChange:this.nameToRute.bind(this)}),r.a.createElement("div",{className:"textareaDiv"},r.a.createElement("label",{htmlFor:"textareaInput",id:"routeDescriptionInput"},"Route description"),r.a.createElement("textarea",{rows:"2",cols:"25",className:"textareaInput",onChange:this.descriptionToRoute.bind(this)})),r.a.createElement("form",null,r.a.createElement(f,{className:"submitRoute",onClick:this.saveRouteToPod.bind(this),message:"Save Route"})))}}]),n}(a.Component)),Ke=(n(599),function(){var e=Object(m.g)();return r.a.createElement(r.a.Fragment,null,r.a.createElement(ue,{pageWrapId:"page-wrap",container:"outer-container"}),r.a.createElement("div",{className:"savePage",id:"page-wrap"},r.a.createElement("div",{className:"cardsave"},r.a.createElement($e,{onFinish:function(t){e.push("/routes"),We.setReload(!0)}}),r.a.createElement("div",{className:"mapContainerSave",style:{position:"relative",width:"40vw",height:"40vh"}},r.a.createElement(ze,null)))))}),Qe=(n(1635),n(1636)),et=function(){function e(t,n,a,r){Object(i.a)(this,e),this.webId=t,this.name=n,this.profilePicture=a,this.webIdString=r}return Object(c.a)(e,[{key:"toString",value:function(){console.log("WEB_ID: "+this.webIdString+" NAME: "+this.name+" PROFILE_PICTURE: "+this.profilePicture)}}]),e}(),tt=n(107).default;function nt(){return at.apply(this,arguments)}function at(){return(at=Object(b.a)(v.a.mark((function e(){var t,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(Qe.a)("user.friends"),n=[],t.forEach(function(){var e=Object(b.a)(v.a.mark((function e(t){var a,r,o,s,i,c;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.value,r=tt[a],o=r.toString(),e.next=5,rt(r);case 5:return s=e.sent,e.next=8,ct(r);case 8:i=e.sent,c=new et(r,s,i,o),n.push(c);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function rt(e){return ot.apply(this,arguments)}function ot(){return(ot=Object(b.a)(v.a.mark((function e(t){var n,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.name;case 2:return n=e.sent,e.prev=3,e.abrupt("return",n.value);case 7:return e.prev=7,e.t0=e.catch(3),e.next=11,tt[t].name;case 11:return a=e.sent,e.prev=12,e.abrupt("return",a.value);case 16:return e.prev=16,e.t1=e.catch(12),e.abrupt("return",t.toString().substring(8,t.toString().length-1));case 19:case"end":return e.stop()}}),e,null,[[3,7],[12,16]])})))).apply(this,arguments)}function st(e){return it.apply(this,arguments)}function it(){return(it=Object(b.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.toString().substring(8,t.toString().length-1));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ct(e){return lt.apply(this,arguments)}function lt(){return(lt=Object(b.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.vcard_hasPhoto;case 2:return n=e.sent,e.prev=3,e.abrupt("return",n.value);case 7:return e.prev=7,e.t0=e.catch(3),e.abrupt("return","images/userPictureUndefined");case 10:case"end":return e.stop()}}),e,null,[[3,7]])})))).apply(this,arguments)}var ut=n(30),pt=new k.a(ut,{enableLogging:!0}),mt={friends:[],empty:function(){},addToNewGroup:function(e){this.friends.push(e)},addtogroup:function(e,t){},creategroup:function(e,t){var n=this;return Object(b.a)(v.a.mark((function a(){var r,o,s,i,c,l;return v.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,ut.currentSession();case 2:r=a.sent,o=n.create_UUID(),s=t+o+".jsonld",i=r.webId.substring(0,r.webId.length-16)+"/viade/groups/"+s,c=JSON.stringify(n.group_template(t,e,o)),l=new File([c],s,{type:"application/ld+json"}),n.updateFile(i,l,l.type),C(i,s);case 10:case"end":return a.stop()}}),a)})))()},updateFile:function(e,t,n){return Object(b.a)(v.a.mark((function a(){return v.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",pt.putFile(e,t,n).catch(console.log));case 1:case"end":return a.stop()}}),a)})))()},checkexistance:function(e,t){return Object(b.a)(v.a.mark((function n(){var a,r,o;return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,pt.itemExists(t);case 2:if(!n.sent){n.next=21;break}return n.prev=3,n.next=6,pt.readFolder(t);case 6:a=n.sent,r=a.files,o=0;case 9:if(!(o<r.length)){n.next=15;break}if(!r[o].url.includes(e)){n.next=12;break}return n.abrupt("return",!0);case 12:o++,n.next=9;break;case 15:n.next=19;break;case 17:n.prev=17,n.t0=n.catch(3);case 19:n.next=22;break;case 21:return n.abrupt("return",!1);case 22:case"end":return n.stop()}}),n,null,[[3,17]])})))()},group_template:function(e,t,n){return{"@context":{"@version":1.1,users:{"@container":"@list","@id":"schema:Person"},name:{"@id":"schema:name","@type":"xs:string"},url:{"@id":"schema:url","@type":"xs:string"},identifier:{"@id":"schema:identifier","@type":"PropertyValue",propertyID:"Viade Friend Group",value:n},schema:"http://schema.org/",xsd:"http://www.w3.org/2001/XMLSchema#"},identifier:n,name:e,users:t}},create_UUID:function(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?n:3&n|8).toString(16)}))}},dt={getUserGroupFriends:function(e){var t=this;return Object(b.a)(v.a.mark((function a(){var r,o,s,i,c,l,u,p,m,d,f,h,g,b;return v.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r=n(30),o=n(48),s=new o(r),i=[],a.next=6,r.currentSession();case 6:if((c=a.sent)&&void 0!==c.webId&&null!==c.webId){a.next=10;break}return e(),a.abrupt("return",void 0);case 10:return l=c.webId.substring(0,c.webId.length-16)+"/viade/groups/",a.next=13,s.itemExists(l).then().catch((function(e){return console.log("There was a problem reading the folder "+l),!1}));case 13:if(!a.sent){a.next=42;break}return a.prev=14,a.next=17,s.readFolder(l);case 17:u=a.sent,p=u.files,m=0;case 20:if(!(m<p.length)){a.next=32;break}return d=p[m].url,f=d.split("/"),h=f[f.length-1],ft(p[m].url,h),a.next=27,s.readFile(p[m].url);case 27:g=a.sent,i.push(g);case 29:m++,a.next=20;break;case 32:a.next=40;break;case 34:a.prev=34,a.t0=a.catch(14),console.log("The folder couldn't be read"),console.log(a.t0),console.log(a.t0.status),console.log(a.t0.message);case 40:a.next=42;break;case 42:b=t.jsonify(i),vt.setGroups(b);case 44:case"end":return a.stop()}}),a,null,[[14,34]])})))()},jsonify:function(e){var t;return t=e.map((function(e){return JSON.parse(e)})),console.log(e),t}};function ft(e,t){var a=n(30);new(n(48))(a).itemExists(e).then().catch((function(e){}))||C(e,t)}var ht=function(e,t){mt.creategroup(e,t)},gt=function(e){return Object(b.a)(v.a.mark((function t(){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",dt.getUserGroupFriends(e));case 1:case"end":return t.stop()}}),t)})))()},vt={groups:[],groupSelected:"",setGroups:function(e){this.groups=e},getGroups:function(e){var t=this;return Object(b.a)(v.a.mark((function n(){return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(t.groups.length>0)){n.next=4;break}return n.abrupt("return",t.groups);case 4:return n.next=6,gt(e);case 6:return n.abrupt("return",t.groups);case 7:case"end":return n.stop()}}),n)})))()},getLoadedGroups:function(){return this.groups},clear:function(){this.groups=[]},setGroupSelected:function(e){this.groupSelected=e},getGroupSelected:function(e){var t=this;return Object(b.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.groupSelected);case 1:case"end":return e.stop()}}),e)})))()}},bt={friends:[],loadFriends:function(){var e=this;return Object(b.a)(v.a.mark((function t(){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==e.friends.length){t.next=4;break}return t.next=3,nt().then((function(e){return e}));case 3:e.friends=t.sent;case 4:case"end":return t.stop()}}),t)})))()},getFriends:function(){return this.friends},clear:function(){this.friends=[]}},yt=(n(345),n(1206),n(107)),wt=(n(1223),function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).state={image:"https://www.lepetitjuriste.fr/wp-content/uploads/2019/02/default_F.png",name:"",clicked:!1},a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.setState({clicked:!1}),this.getProfileImage().then((function(t){void 0==t?e.setState({image:"https://www.lepetitjuriste.fr/wp-content/uploads/2019/02/default_F.png"}):e.setState({image:t})})),this.getProfileName().then((function(t){void 0==t?e.setState({name:"Welcome, Guest"}):e.setState({name:"Welcome, "+t})}))}},{key:"getProfileImage",value:function(){var e=Object(b.a)(v.a.mark((function e(){var t,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=yt.default.user,e.next=4,t.vcard_hasPhoto;case 4:return n=e.sent,e.abrupt("return",n.value);case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"getProfileName",value:function(){var e=Object(b.a)(v.a.mark((function e(){var t,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=yt.default.user,e.next=4,t.name;case 4:return n=e.sent,e.abrupt("return",n.value);case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){this.state.clicked;return r.a.createElement("div",{className:"loginButton"},r.a.createElement("div",{className:"dropdown"},r.a.createElement("img",{id:"avataruser",src:this.state.image}),r.a.createElement("span",{style:{padding:"10px"}},this.state.name.split(" ")[1]),r.a.createElement("div",{className:"dropdown-content"},r.a.createElement(p.a,null,r.a.createElement(p.b,{className:"linkUser",to:"/login"},"Profile")))))}}]),n}(a.Component)),xt=function(){bt.loadFriends(),vt.getGroups((function(){}));var e=Object(a.useState)(!1),t=Object(d.a)(e,2),n=t[0],o=t[1],s=function(){We.getSelected().then((function(e){""!==e?o(!n):re.c.error("No Route Selected",{draggable:!0,position:re.c.POSITION.TOP_CENTER})}))};return r.a.createElement("div",{className:"App",id:"outer-container"},r.a.createElement(ue,{pageWrapId:"page-wrap",container:"outer-container"}),r.a.createElement("main",{className:"main",id:"page-wrap"},r.a.createElement(oe,{showUpload:function(){return s()}}),r.a.createElement("div",null,n?r.a.createElement(Ze,{showUpload:function(){return s()}}):null),r.a.createElement(ze,null)),r.a.createElement(wt,null))},Et=n(1643),kt=n(1644),Ot=new k.a(x,{enableLogging:!0}),jt=function(){(function(){return Nt.apply(this,arguments)})().catch((function(e){console.log(e)}))};function Nt(){return(Nt=Object(b.a)(v.a.mark((function e(){var t,n,a,r,o,s,i,c,l;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.currentSession();case 2:if((t=e.sent)&&void 0!==t.webId&&null!==t.webId){e.next=5;break}throw new Error("You are not logged in.");case 5:n=t.webId.split("profile")[0],a="".concat(n,"viade/routes/"),r="".concat(n,"viade/routes/"),o="".concat(n,"viade/comments/"),s="".concat(n,"viade/inbox/"),i="".concat(n,"viade/shared/"),c="".concat(n,"viade/groups/"),l="".concat(n,"viade/resources/"),j(a,"viade"),Ot.createFolder(r).then().catch((function(e){console.log("It looks like we can not create necessary folders inside your pod")})),j(r,"routes"),Ot.createFolder(c).then().catch((function(e){console.log("It looks like we can not create necessary folders inside your pod")})),j(c,"groups"),Ot.createFolder(o).then().catch((function(e){console.log("It looks like we can not create necessary folders inside your pod")})),j(o,"comments"),Ot.createFolder(s).then().catch((function(e){console.log("It looks like we can not create necessary folders inside your pod")})),T(s),Ot.createFolder(i).then().catch((function(e){console.log("It looks like we can not create necessary folders inside your pod")})),j(i,"shared"),Ot.createFolder(l).then().catch((function(e){console.log("It looks like we can not create necessary folders inside your pod")})),j(l,"resources"),console.log("se ha llamado");case 27:case"end":return e.stop()}}),e)})))).apply(this,arguments)}n(1224);var Tt=n(30),St=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).viewImageLoaded=function(){},a.state={image:"https://www.lepetitjuriste.fr/wp-content/uploads/2019/02/default_F.png",name:""},a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.getProfileImage().then((function(t){void 0==t?e.setState({image:"https://www.lepetitjuriste.fr/wp-content/uploads/2019/02/default_F.png"}):e.setState({image:t})})),this.getProfileName().then((function(t){void 0==t&&e.setState({name:"Guest"}),e.setState({name:"Welcome, "+t})}))}},{key:"componentDidUpdate",value:function(e,t){var n=this;t.image!==this.state.image&&(this.getProfileImage().then((function(e){void 0==e?n.setState({image:"https://www.lepetitjuriste.fr/wp-content/uploads/2019/02/default_F.png"}):n.setState({image:e})})),this.getProfileName().then((function(e){void 0==e&&n.setState({name:"Welcome, Guest"}),n.setState({name:e})})))}},{key:"popup",value:function(){var e=Object(b.a)(v.a.mark((function e(t,n){var a,r=this;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,n.currentSession();case 3:if(a=e.sent,"https://solid.community/common/popup.html",a){e.next=9;break}return e.next=8,n.popupLogin({popupUri:"https://solid.community/common/popup.html"});case 8:a=e.sent;case 9:this.getProfileImage().then((function(e){void 0==e?r.setState({image:"https://www.lepetitjuriste.fr/wp-content/uploads/2019/02/default_F.png"}):r.setState({image:e})})),this.getProfileName().then((function(e){void 0==e?r.setState({name:"Welcome, Guest"}):r.setState({name:"Welcome, "+e})})),jt();case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"logout",value:function(){var e=Object(b.a)(v.a.mark((function e(t,n){var a=this;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,n.logout();case 3:this.getProfileImage().then((function(e){void 0==e?a.setState({image:"https://www.lepetitjuriste.fr/wp-content/uploads/2019/02/default_F.png"}):a.setState({image:e})})),this.getProfileName().then((function(e){void 0==e?a.setState({name:"Welcome, Guest"}):a.setState({name:"Welcome, "+e})})),We.clear(),bt.clear();case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getProfileImage",value:function(){var e=Object(b.a)(v.a.mark((function e(){var t,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=yt.default.user,e.next=4,t.vcard_hasPhoto;case 4:return n=e.sent,e.abrupt("return",n.value);case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"getProfileName",value:function(){var e=Object(b.a)(v.a.mark((function e(){var t,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=yt.default.user,e.next=4,t.name;case 4:return n=e.sent,e.abrupt("return",n.value);case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"createFolder",value:function(){var e=Object(b.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:jt().then().catch((function(e){console.log(e)}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state.image;return r.a.createElement("div",{className:".bodyContainer",id:"outer-container"},r.a.createElement(ue,{pageWrapId:"page-wrap",container:"outer-container"}),r.a.createElement("div",{className:"container-login100",id:"page-wrap"},r.a.createElement("div",{className:"wrap-login100"},r.a.createElement("div",{className:"login100-pic js-tilt","data-tilt":!0},r.a.createElement("img",{src:t,alt:"IMG"})),r.a.createElement("form",{className:"login100-form validate-form"},r.a.createElement("span",{className:"login100-form-title"},"Pod Login"),r.a.createElement(Et.a,null,r.a.createElement("div",{className:"wrap-input100"},r.a.createElement("input",{id:"inputLogin",className:"input100",list:"providers",type:"text",name:"provider",placeholder:"Provider"}),r.a.createElement("datalist",{id:"providers"},r.a.createElement("option",{value:"https://solid.community/"}),r.a.createElement("option",{value:"https://inrupt.net/"})),r.a.createElement("span",{className:"focus-input100"})),r.a.createElement("button",{className:"login100-form-btn",onClick:function(t){return e.popup(t,Tt)}},"Log In")),r.a.createElement(kt.a,null,r.a.createElement("p",null,this.state.name),r.a.createElement("button",{className:"login100-form-btn",onClick:function(t){return e.logout(t,Tt)}},"Log out"))))))}}]),n}(r.a.Component),Ct=function(){return bt.loadFriends(),r.a.createElement(St,null)},It=n(1642),Ft=n(764),Rt=n(1640),At=n(203),Pt=(n(1225),function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){var e=void 0===this.props.link,t=void 0===this.props.externalLink,n=void 0===this.props.detailsLink,a=void 0===this.props.shareIconName;return r.a.createElement("div",null,r.a.createElement(It.a,{className:"claim_Card"},r.a.createElement("link",{rel:"stylesheet",href:"https://cdn.jsdelivr.net/npm/semantic-ui@2.4.1/dist/semantic.min.css"}),r.a.createElement(Ft.a,{className:"ui medium image",src:this.props.image}),r.a.createElement(It.a.Content,null,r.a.createElement(It.a.Header,null,this.props.header),r.a.createElement(It.a.Meta,null,r.a.createElement("span",{className:"date"},this.props.date)),r.a.createElement(It.a.Description,null,this.props.description)),r.a.createElement(It.a.Content,{extra:!0},r.a.createElement(p.a,null,r.a.createElement(p.b,{className:this.props.classLink,hidden:e,to:this.props.link,onClick:this.props.action},r.a.createElement(Rt.a,{trigger:r.a.createElement(At.a,{name:this.props.iconName}),mouseEnterDelay:250,content:this.props.popupContent,position:"bottom center"})),r.a.createElement("span",{className:"spacespan",hidden:e}," "),r.a.createElement("a",{className:this.props.externalClassName,hidden:t,target:"_blank",rel:"noopener noreferrer",href:this.props.externalLink,onClick:this.props.externalAction},r.a.createElement(Rt.a,{trigger:r.a.createElement(At.a,{name:this.props.externalIconName}),mouseEnterDelay:250,content:this.props.externalPopupContent,position:"bottom center"})),r.a.createElement("span",{className:"spacespan",hidden:t}," "),r.a.createElement(p.b,{className:this.props.detailsClassName,hidden:n,to:this.props.detailsLink,onClick:this.props.detailsAction},r.a.createElement(Rt.a,{trigger:r.a.createElement(At.a,{name:this.props.detailsIconName}),mouseEnterDelay:250,content:this.props.detailsPopupContent,position:"bottom center"})),r.a.createElement("span",{className:"spacespan",hidden:n}," "),r.a.createElement(p.b,{className:"linkRoute",hidden:a,to:"/shareroute",onClick:this.props.shareAction},r.a.createElement(Rt.a,{trigger:r.a.createElement(At.a,{name:this.props.shareIconName}),mouseEnterDelay:250,content:"Share the route with with friends",position:"bottom center"}))))))}}]),n}(a.Component)),Dt=(n(661),[]),Lt=function(){return Dt=bt.getFriends(),r.a.createElement("div",{className:"bodyFriends",id:"outer-container"},r.a.createElement("main",null,r.a.createElement(ue,{pageWrapId:"page-wrap",container:"outer-container"}),r.a.createElement("div",{className:"App friends",id:"page-wrap"},r.a.createElement("section",{className:"sectionFriends"},r.a.createElement("ul",{className:"friendContainer"},Dt.map((function(e,t){return r.a.createElement("li",{id:"friend"+t,key:t,className:"liCard"},r.a.createElement(Pt,{image:e.profilePicture,header:e.name,description:e.webIdString,externalLink:e.webIdString,externalIconName:"user",externalPopupContent:"Go to profile",numberOfFriends:e.numberOfFriends}))})))))))},Ut=(n(1351),n(1352),function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){return r.a.createElement("input",{type:"text",id:"searchBar",value:this.props.value,onChange:this.props.action,placeholder:"Search for names..",title:"Type in a name"})}}]),n}(r.a.Component)),Mt=n(1638),_t=n(200),Gt=n(1641),Wt=(n(1353),n(26)),Jt=n(1637),Bt=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={message:""},e.handleChange=function(t,n){var a=n.name,r=n.value;return e.setState(Object(Wt.a)({},a,r))},e.handleSubmit=function(){var t=e.state.message,n=JSON.parse(localStorage.getItem("session")).webId,a=We.getSelectedDetails().commentsUrl;B(a,new M(a,t,n,""),(function(){})),e.setState({message:""})},e}return Object(c.a)(n,[{key:"render",value:function(){var e=this.state.message;return r.a.createElement("div",null,r.a.createElement(Jt.a,{onSubmit:this.handleSubmit},r.a.createElement(Jt.a.Group,null,r.a.createElement(Jt.a.TextArea,{placeholder:"Type your message here!",name:"message",value:e,onChange:this.handleChange}),r.a.createElement(Jt.a.Button,{content:"Submit"}))))}}]),n}(a.Component),Vt=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).state={items:e.props.content.slice(0,20),array_index:20,hasMore:!0},e.fetchMoreData=function(){setTimeout((function(){e.setState({items:e.state.items.concat(e.props.content.slice(e.state.array_index,e.state.array_index+20)),array_index:e.state.array_index+20})}),100),e.props.content.length<=e.state.array_index&&e.setState({hasMore:!1})},e.viewLoaded=function(t){return r.a.createElement("div",null,r.a.createElement(_t.a,{dataLength:t.length,next:e.fetchMoreData,hasMore:e.state.hasMore,loader:r.a.createElement("h4",null,"Loading..."),endMessage:r.a.createElement("p",{style:{textAlign:"center"}},r.a.createElement("b",null,"Yay! You have seen it all")),scrollableTarget:e.props.scrollParent},r.a.createElement(Gt.a.Group,null,r.a.createElement("link",{rel:"stylesheet",href:"https://cdn.jsdelivr.net/npm/semantic-ui/dist/semantic.min.css"}),t.map((function(e,t){return r.a.createElement("div",{className:"commentsContainer",key:t},r.a.createElement(Gt.a,null,r.a.createElement(Gt.a.Content,null,r.a.createElement(Gt.a.Author,{as:"span"},e.jsonComment.author.substring(8,e.jsonComment.author.length-1).split(".")[0]),r.a.createElement(Gt.a.Metadata,null,r.a.createElement("div",null,e.jsonComment.dateCreated)),r.a.createElement(Gt.a.Text,null,e.jsonComment.text))))})))),r.a.createElement(Bt,null))},e}return Object(c.a)(n,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,this.viewLoaded(this.props.content))}}]),n}(r.a.Component),Ht=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={items:e.props.content.slice(0,20),array_index:20,hasMore:!0},e.fetchMoreData=function(){setTimeout((function(){e.setState({items:e.state.items.concat(e.props.content.slice(e.state.array_index,e.state.array_index+20)),array_index:e.state.array_index+20})}),100),e.props.content.length<=e.state.array_index&&e.setState({hasMore:!1})},e}return Object(c.a)(n,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(_t.a,{dataLength:this.state.items.length,next:this.fetchMoreData,hasMore:this.state.hasMore,loader:r.a.createElement("h4",null,"Loading..."),endMessage:r.a.createElement("p",{style:{textAlign:"center"}},r.a.createElement("b",null,"Yay! You have seen it all")),scrollableTarget:this.props.scrollParent},this.state.items.map((function(e,t){return r.a.createElement("div",{key:t},r.a.createElement("img",{src:e.filePath,alt:"hola",width:"200",height:"200"}),r.a.createElement("span",null,"Published: ",e.dateAttached.toDateString(),","," ",e.dateAttached.getHours(),":",e.dateAttached.getMinutes()))}))))}}]),n}(r.a.Component),zt=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={items:e.props.content.slice(0,20),array_index:20,hasMore:!0},e.fetchMoreData=function(){setTimeout((function(){e.setState({items:e.state.items.concat(e.props.content.slice(e.state.array_index,e.state.array_index+20)),array_index:e.state.array_index+20})}),100),e.props.content.length<=e.state.array_index&&e.setState({hasMore:!1})},e}return Object(c.a)(n,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(_t.a,{dataLength:this.state.items.length,next:this.fetchMoreData,hasMore:this.state.hasMore,loader:r.a.createElement("h4",null,"Loading..."),endMessage:r.a.createElement("p",{style:{textAlign:"center"}},r.a.createElement("b",null,"Yay! You have seen it all")),scrollableTarget:this.props.scrollParent},this.state.items.map((function(e,t){return r.a.createElement("div",{key:t},r.a.createElement("video",{width:"320",height:"240",controls:!0},r.a.createElement("source",{src:e.filePath,type:"video/mp4"}),"Your browser does not support the video tag."),r.a.createElement("span",null,"Published: ",e.dateAttached.toDateString(),","," ",e.dateAttached.getHours(),":",e.dateAttached.getMinutes()))}))))}}]),n}(r.a.Component),Yt=[],Xt=[],qt=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).panes=function(){return[{menuItem:"Comentarios",pane:{key:"tabComentarios",content:r.a.createElement("div",{className:"routeComments",id:"scrollableCommentDiv",style:{overflow:"scroll",height:400}},r.a.createElement(Vt,{content:a.state.comentarios,scrollParent:"scrollableCommentDiv"}))}},{menuItem:"Imagenes",pane:{key:"tabImagenes",content:r.a.createElement("div",{className:"routeImages",id:"scrollableImageDiv",style:{overflow:"scroll",height:400}},r.a.createElement(Ht,{content:Yt,scrollParent:"scrollableImageDiv"}))}},{menuItem:"Videos",pane:{key:"tabVideos",content:r.a.createElement("div",{className:"routeVideos",id:"scrollableVideoDiv",style:{overflow:"scroll",height:400}},r.a.createElement(zt,{content:Xt,scrollParent:"scrollableVideoDiv"}))}}]},a.state={comentarios:[]},a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=this;(function(e,t){return J.apply(this,arguments)})(this.props.route.commentsUrl,(function(){})).then((function(t){e.setState({comentarios:t})}))}},{key:"render",value:function(){Yt.length=0,Xt.length=0;var e=[];return e=Ge.getFilePathsForRoute(this.props.route),console.log(e),e.forEach((function(e){null!==e.contentType&&(e.contentType.includes("image")?Yt.push(e):e.contentType.includes("video")&&Xt.push(e))})),r.a.createElement("div",{className:"MyTabDiv"},r.a.createElement("link",{rel:"stylesheet",href:"https://cdn.jsdelivr.net/npm/semantic-ui/dist/semantic.min.css"}),r.a.createElement(Mt.a,{panes:this.panes(),renderActiveOnly:!1}))}}]),n}(r.a.Component),Zt=(n(1376),function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).state={loading:!0,details:""},e.handleClick=function(t){e.node.contains(t.target)||e.props.showUpload()},e.handleSession=function(){e.props.history.push("/login")},e.viewLoaded=function(t){return r.a.createElement("div",{ref:function(t){return e.node=t},className:"routeDetails"},r.a.createElement("div",{className:"DetailsZone"},r.a.createElement("h2",null,t.name),r.a.createElement(qt,{route:t})))},e}return Object(c.a)(n,[{key:"componentWillMount",value:function(){document.addEventListener("mousedown",this.handleClick,!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.handleClick,!1)}},{key:"componentDidMount",value:function(){var e=We.getSelectedDetails();this.setState({loading:!1,details:e})}},{key:"render",value:function(){var e=this.state.loading;return r.a.createElement(r.a.Fragment,null,e?r.a.createElement(Ve,null):this.viewLoaded(this.state.details))}}]),n}(r.a.Component)),$t=n(30),Kt=new(n(48))($t);function Qt(e){return en.apply(this,arguments)}function en(){return(en=Object(b.a)(v.a.mark((function e(t){var n,a,r,o;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],a=[],t,e.next=5,Kt.itemExists(t).then().catch((function(e){console.log("You have not being granted the permissions to read this route")}));case 5:if(!e.sent){e.next=22;break}return e.prev=6,e.next=9,Kt.readFile(t);case 9:r=e.sent,a.push(t),n.push(r),e.next=20;break;case 14:e.prev=14,e.t0=e.catch(6),console.log("The folder couldn't be read"),console.log(e.t0),console.log(e.t0.status),console.log(e.t0.message);case 20:e.next=23;break;case 22:console.log("user has no routes directory");case 23:return o=nn(tn(n,a),a),localStorage.setItem("urls",JSON.stringify(a)),e.abrupt("return",o);case 26:case"end":return e.stop()}}),e,null,[[6,14]])})))).apply(this,arguments)}function tn(e,t){for(var n=[],a=0;a<e.length;a++)try{var r=JSON.parse(e[a]);n.push(r)}catch(o){t.splice(a,1),console.log("Route "+a+" couldn't be transformed to json because the format is wrong")}return n}function nn(e,t){for(var n=[],a=[],r=0;r<e.length;r++)try{var o=e[r].name,s=e[r].points,i=e[r].description,c=void 0;c=e[r].hasOwnProperty("comments")&&void 0!=e[r].comments?e[r].comments:"";var l=new w(o,s,i);l.commentsUrl=c,l.setUrl(t[r]),l.setJsonFormat(e[r]),n.push(l),e[r].media&&a.push(an(e[r],t[r]))}catch(u){console.log("Route "+r+" couldn't be parsed because the format is wrong"),console.log(u)}return{routes:n,files:a}}function an(e,t){for(var n=new be(t,[]),a=0;a<e.media.length;a++){var r=e.media[a]["@id"];if(Kt.itemExists(r).then().catch((function(e){return console.log("You have no permissions to read the media files")}))){var o=new Date(e.media[a].dateTime),s=new ge(r,o);n.addFilePath(s)}}return n}var rn=n(30),on=new(n(48))(rn);function sn(){return(sn=Object(b.a)(v.a.mark((function e(t){var n,a,r,o,s,i,c,l;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.next=3,cn(n);case 3:if(a=e.sent,r=[],o=[],s=[],!a){e.next=23;break}i=0;case 9:if(!(i<a.length)){e.next=20;break}return c=a[i],e.next=13,Qt(c);case 13:l=e.sent,r.push(l),o=[].concat(Object(ve.a)(o),Object(ve.a)(l.routes)),s=[].concat(Object(ve.a)(s),Object(ve.a)(l.files));case 17:i++,e.next=9;break;case 20:console.table(o),Ge.addFilePaths(s),We.setSharedRoutes(o);case 23:return e.abrupt("return",r);case 24:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function cn(e){return ln.apply(this,arguments)}function ln(){return(ln=Object(b.a)(v.a.mark((function e(t){var n,a,r,o,s,i,c,l;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],a=[],JSON.parse(localStorage.getItem("urls")),e.next=5,on.readFolder(t).then().catch((function(e){console.log("There was a problem reading "+t)}));case 5:r=e.sent,e.prev=6,o=r.files,s=0;case 9:if(!(s<o.length)){e.next=19;break}return e.next=12,on.readFile(o[s].url);case 12:for(i=e.sent,n.push(i),c=un(pn(i)),l=0;l<c.length;l++)a.push(c[l]);case 16:s++,e.next=9;break;case 19:return un(pn(n)),e.abrupt("return",a);case 23:e.prev=23,e.t0=e.catch(6),console.log("It could not be read the folder "+t);case 26:case"end":return e.stop()}}),e,null,[[6,23]])})))).apply(this,arguments)}function un(e){for(var t=[],n=[],a=0;a<e.length;a++)try{for(var r=e[a].routes,o=0;o<r.length;o++){var s=r[o]["@id"];n.push(s)}return t.push(e[a]),n}catch(i){}}function pn(e){var t=[],n="";try{n=e;var a=JSON.parse(n);t.push(a)}catch(r){console.log("Route "+n+" couldn't be transformed to json because the format is wrong")}return t}var mn=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).urls=[],a.handleSession=function(){a.props.history.push("/login")},a.viewLoaded=function(e,t){console.log(t);var n=e.filter((function(e){return-1!==e.name.toLowerCase().indexOf(a.state.search.toLowerCase())})),o=t.filter((function(e){return-1!==e.name.toLowerCase().indexOf(a.state.search.toLowerCase())}));return r.a.createElement("div",{className:"bodyRoutes",id:"outer-container"},a.state.showDetails?a.getDetailsZone():null,r.a.createElement("main",null,r.a.createElement(ue,{pageWrapId:"page-wrap",container:"outer-container"}),r.a.createElement("div",{className:"App routes",id:"page-wrap"},r.a.createElement("header",{className:"bodyHeader"}),r.a.createElement("section",{className:"sectionRoutes"},r.a.createElement(Ut,{value:a.state.search,action:a.updateSearch.bind(Object(Ye.a)(a)),list:"listRoute"}),r.a.createElement("h1",null,"My routes"),r.a.createElement("ul",{className:"listRoute"},n.map((function(t,n){return r.a.createElement("li",{id:"route"+n,key:n,className:"liCard"},r.a.createElement("div",{className:"routeListElementContainter"},r.a.createElement(Pt,{header:t.name,image:"images/daddy.jpg",link:"/",className:"linkRoute",description:t.description,action:function(t){We.setSelected(e[n]),re.c.info("Route Selected",{draggable:!0,position:re.c.POSITION.TOP_CENTER})},iconName:"map",popupContent:"Show on map",detailsClassName:"linkRoute",detailsLink:"/routes",detailsAction:function(t){a.viewDetails(e[n])},detailsIconName:"info",detailsPopupContent:"Show messages and multimedia",shareIconName:"share",shareAction:function(e){We.setSelectedToShare(t.url)}})))}))),r.a.createElement("h1",null,"Shared routes"),r.a.createElement("ul",{className:"listRoute"},o.map((function(e,n){return r.a.createElement("li",{id:"route"+n,key:n,className:"liCard"},r.a.createElement("div",{className:"routeListElementContainter"},r.a.createElement(Pt,{header:e.name,image:"images/daddy.jpg",link:"/",className:"linkRoute",description:e.description,action:function(e){We.setSelected(t[n])},iconName:"map",popupContent:"Show on map",detailsClassName:"linkRoute",detailsLink:"/routes",detailsAction:function(e){a.viewDetails(t[n])},detailsIconName:"info",detailsPopupContent:"Show messages and multimedia"})))})))))))},a.viewCharge=function(){return r.a.createElement("div",{className:"bodyRoutes",id:"outer-container"},r.a.createElement(Ve,null))},a.state={loading:!0,routes:"",sharedRoutes:"",search:"",showDetails:!1},a}return Object(c.a)(n,[{key:"updateSearch",value:function(e){this.setState({search:e.target.value.substr(0,20)})}},{key:"componentDidMount",value:function(){var e=this;We.getRoutes(this.handleSession).then((function(t){e.setState({loading:!0,routes:t});var n=JSON.parse(localStorage.getItem("session"));n&&function(e){return sn.apply(this,arguments)}(n.webId.substring(0,n.webId.length-16)+"/viade/shared/").then((function(){We.getSharedRoutes().then((function(t){console.log(t),e.setState({loading:!1,sharedRoutes:t})}))}))})),We.setReload(!1)}},{key:"viewDetails",value:function(e){We.setSelectedDetails(e),this.setState({showDetails:!0})}},{key:"getDetailsZone",value:function(){var e=this;return r.a.createElement(Zt,{showUpload:function(){e.setState({showDetails:!e.state.showDetails})}})}},{key:"render",value:function(){var e=this.state.loading;return r.a.createElement(r.a.Fragment,null,e?r.a.createElement(Ve,null):this.viewLoaded(this.state.routes,this.state.sharedRoutes))}}]),n}(r.a.Component),dn=(n(1377),function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).viewCharge=function(){return r.a.createElement("div",{className:"bodyAbout",id:"outer-container"},r.a.createElement(Ve,null))},a.state={loading:!0},a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.setState({loading:!1})}},{key:"viewLoaded",value:function(){return r.a.createElement("div",{className:"bodyAbout",id:"outer-container"},r.a.createElement("main",null,r.a.createElement(ue,{pageWrapId:"page-wrap",container:"outer-container"}),r.a.createElement("div",{className:"App about",id:"page-wrap"},r.a.createElement("header",{className:"bodyHeader"}),r.a.createElement("section",{className:"sectionViade"},r.a.createElement("h2",null,"ViaDe"),r.a.createElement("p",null,"Do you walk? Run? Bike? With ViaDe, you'll be able to create, manage, and share routes you take with your friends! Login credentials and data storage and retrieval is done using Solid, an industry-leading technology backed by the creator of the World Wide Web himself, Tim Berners-Lee."),r.a.createElement("p",null,"En2B is a group of Computer Engineering students from Asturias, Spain. We're really excited to bring the world our web application, made with lots of effort and love.")),r.a.createElement("section",{className:"sectionDevelopers"},r.a.createElement("h2",null," The team "),r.a.createElement("ul",{className:"developerContainer"},[{image:"images/developers/andres.jpg",name:"Andr\xe9s",meta:"Back-end",description:"Andr\xe9s pretty much carried the team through the early parts of thinking about implementing SOLID. He's the one that focused the most on following the specifications we had to, and reprimanded us when we were straying from the righteous path. Also, he had the idea for the logo. It's a good logo.",link:"mailto:UO264345@uniovi.es",numberOfFriends:""},{image:"images/developers/fernando.jpg",name:"Fernando",meta:"UI & UX designer",description:"Fernando has programmed in 15+ different programming languages. He has yet to make something useful. In the repo, he's somehow deleted more than 30,000 lines of code, and added around 17,000. At least the app's pretty, he thinks.",link:"mailto:UO266754@uniovi.es",numberOfFriends:""},{image:"images/developers/guillermo.png",name:"Guillermo",meta:"Page and view designer",description:"Guille started learning react like a champ from day zero. He's got the better understanding of the mess that is working with react. If you don't know why your view isn't updating, he's probably your guy.",link:"mailto:UO264207@uniovi.es",numberOfFriends:""},{image:"images/developers/miguel.png",name:"Miguel",meta:"Back-end",description:"Fueling himself with caffeine, Miguel has tried (and succeded) to crack the hardest problems we faced on the back-end. Mainly, to get it working. At least sometimes. He's responsible for the upcoming feature of recording real-time routes. That's dedication.",link:"mailto:UO258629@uniovi.es",numberOfFriends:""},{image:"images/developers/violeta.jpg",name:"Violeta",meta:"Back-end",description:"Violeta is the quietest member of the group, but she does the work she's got like anybody else. Mainly, this work has been route listing and some testing that you don't get to see. Maybe she's too busy thinking about the code to talk. Or could it be puppies?",link:"mailto:UO258454@uniovi.es",numberOfFriends:""},{image:"images/developers/clara.jpg",name:"Clara",meta:"Back-end",description:"Clara is the one to thank for when you're logging in, sharing your routes or commenting on other people's shared routes. Basically, thank her if you have any friends using this app with you.",link:"mailto:UO264958@uniovi.es",numberOfFriends:""},{image:"images/developers/alejandro.png",name:"Alejandro",meta:"User interaction",description:"He may seem jovial at first, but be sure to not touch Alex's buttons. Or do, if you want to use ViaDe. He's somehow responsible for most of them. The expanding, floating button, the hamburguer menu... Great, now I'm hungry.",link:"mailto:UO264255@uniovi.es",numberOfFriends:""}].map((function(e,t){return r.a.createElement("li",{id:"developer"+t,key:t,className:"liCard"},r.a.createElement(Pt,{image:e.image,header:e.name,date:e.meta,description:e.description,externalLink:e.link,externalIconName:"mail",externalPopupContent:"Contact email"}))})))))))}},{key:"render",value:function(){var e=this.state.loading;return r.a.createElement(r.a.Fragment,null,e?r.a.createElement(Ve,null):this.viewLoaded())}}]),n}(r.a.Component)),fn=(n(1378),n(306)),hn=n(421),gn=function e(t,n,a,r,o,s){Object(i.a)(this,e),this.urlNotification=t,this.typeNotification=n,this.urlResource=a,this.authorName=r,this.authorWebId=o,this.date=s,"ROUTE"==n&&(this.message=r+" has shared a route with you.")},vn={notifications:[],getNotifications:function(e){var t=this;return Object(b.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.notifications);case 1:case"end":return e.stop()}}),e)})))()},setNotifications:function(e){this.notifications.push(e)},clear:function(){this.notifications=[]}},bn=n(1622),yn=n(1484)(bn),wn=n(30),xn=new(n(48))(wn),En=n(1485);function kn(){return(kn=Object(b.a)(v.a.mark((function e(t,n){var a,r,o,s,i,c,l,u,p,m;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t,e.next=3,Object(fn.a)(a).then().catch((function(e){console.log("Error")}));case 3:if(!(r=e.sent)){e.next=33;break}o=r.getSubject(a),s=o.getAllRefs(hn.a.contains),i=[],c=0;case 9:if(!(c<s.length)){e.next=31;break}return e.prev=10,e.next=13,Object(fn.a)(s[c]);case 13:if(!(l=e.sent)){e.next=23;break}return u=s[c],o=l.getSubject(u),p=o.getString(yn.as("summary")),e.next=20,On(u,p,n);case 20:m=e.sent,i.push(m),Dn(m.urlNotification);case 23:e.next=28;break;case 25:e.prev=25,e.t0=e.catch(10),console.log("Error");case 28:c++,e.next=9;break;case 31:return vn.setNotifications(i),e.abrupt("return",i);case 33:return e.abrupt("return",[]);case 34:case"end":return e.stop()}}),e,null,[[10,25]])})))).apply(this,arguments)}function On(e,t,n){return jn.apply(this,arguments)}function jn(){return(jn=Object(b.a)(v.a.mark((function e(t,n,a){var r,o,s,i,c,l,u,p,m;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=new gn,e.prev=1,o=n.split("_"),s=o[0],e.t0=s,e.next="ROUTE"===e.t0?7:"COMMENT"===e.t0?20:21;break;case 7:return i=o[1],c=i+"profile/card#me",e.next=11,st(i);case 11:return l=e.sent,e.next=14,rt(c);case 14:return u=e.sent,p=o[2],m=o[3],Nn(r=new gn(t,s,p,u,l,m),a),e.abrupt("return",r);case 20:return e.abrupt("break",23);case 21:return console.log("NOTIFICATION NOT FROM THIS APP: VIADE_EN2B"),e.abrupt("break",23);case 23:return e.abrupt("return",r);case 26:return e.prev=26,e.t1=e.catch(1),console.log("The notification could not be processed, it may be possible that is not a notification from this app."),e.abrupt("return",!1);case 30:case"end":return e.stop()}}),e,null,[[1,26]])})))).apply(this,arguments)}function Nn(e,t){return Tn.apply(this,arguments)}function Tn(){return(Tn=Object(b.a)(v.a.mark((function e(t,n){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n+"/viade/shared/"+t.authorWebId+".jsonld",e.prev=1,e.next=4,xn.itemExists(a).catch(Error).then(console.log("ERROR"));case 4:e.sent?Sn(a,t):In(a,t),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log("Error: not found");case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}function Sn(e,t){return Cn.apply(this,arguments)}function Cn(){return(Cn=Object(b.a)(v.a.mark((function e(t,n){var a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xn.readFile(t);case 2:a=e.sent,(r=JSON.parse(a)).routes.push({"@id":n.urlResource}),xn.createFile(t,JSON.stringify(r),"text/jsonld");case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function In(e,t){var n=function(e){return JSON.stringify({"@context":{"@version":1.1,routes:{"@container":"@list","@id":"viade:routes"},viade:"http://arquisoft.github.io/viadeSpec/"},routes:[{"@id":e.urlResource}]})}(t);xn.createFile(e,n,"text/jsonld")}function Fn(e,t,n){return Rn.apply(this,arguments)}function Rn(){return(Rn=Object(b.a)(v.a.mark((function e(t,n,a){var r,o;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="",o=t[t.length-1],r="/"===o?t+"viade/inbox/":t+"/viade/inbox/",e.next=5,En({method:"POST",uri:r,body:n,headers:{slug:a,"Content-Type":"text/turtle"}},(function(e,t,n){return!e}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function An(e,t,n,a,r,o){return"@prefix terms: <http://purl.org/dc/terms#>.\n          @prefix as: <https://www.w3.org/ns/activitystreams#> .\n          @prefix schema: <http://schema.org/> .\n          @prefix solid: <http://www.w3.org/ns/solid/terms#> .\n          @prefix xsd: <http://www.w3.org/2001/XMLSchema#> .\n          @prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .\n          @prefix : <".concat(n+"viade/inbox/"+o+".ttl",">.\n          <").concat(n+"viade/inbox/"+o+".ttl","> a as:").concat(e,' ;\n          schema:license <https://creativecommons.org/licenses/by-sa/4.0/>;\n          terms:title "').concat(t,'" ;\n          as:summary "').concat(a,'" ;         \n          as:actor <').concat(n,'> ;\n          solid:read "false"^^xsd:boolean ;\n          as:published "').concat(r,'"^^xsd:dateTime .')}function Pn(e,t,n,a){return"ROUTE_"+e+"_"+t+"_"+a}function Dn(e){return Ln.apply(this,arguments)}function Ln(){return(Ln=Object(b.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==t){e.next=6;break}return e.next=3,xn.itemExists(t);case 3:if(!e.sent){e.next=5;break}try{xn.delete(t)}catch(n){alert(n)}case 5:console.log("You are trying to delete something that is null");case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Un=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).viewLoaded=function(e){return r.a.createElement("div",{className:"bodyRoutes",id:"outer-container"},r.a.createElement("main",null,r.a.createElement(ue,{pageWrapId:"page-wrap",container:"outer-container"}),r.a.createElement("div",{className:"App comments",id:"page-wrap"},r.a.createElement("header",{className:"bodyHeader"}),r.a.createElement("section",{className:"sectionComments"},r.a.createElement("ul",{className:"listComment"},e.map((function(e,t){return r.a.createElement("li",{id:"comment"+t,key:t,className:"liComment"},r.a.createElement("div",{className:"sectionComment"},r.a.createElement("div",{className:"commentInfo"},r.a.createElement("p",{className:"header"},r.a.createElement("i",{className:"fa fas fa-bell"}),e.authorName),r.a.createElement("p",{className:"description"},e.message)),r.a.createElement("div",{className:"delete"},r.a.createElement("span",null,r.a.createElement("i",{className:"fa fas fa-trash"})))))})))))))},a.viewCharge=function(){return r.a.createElement("div",{className:"bodyComments",id:"outer-container"},r.a.createElement(Ve,null))},a.state={loading:!0,routes:"",notifications:[]},a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=JSON.parse(localStorage.getItem("session"));if(null!=t){var n=t.webId.substring(0,t.webId.length-16);(function(e,t){return kn.apply(this,arguments)})(n+"/viade/inbox/",n).then((function(t){e.setState({loading:!1,notifications:t})}))}else console.log("There is no session")}},{key:"render",value:function(){var e=this.state.loading;return r.a.createElement(r.a.Fragment,null,e?r.a.createElement(Ve,null):this.viewLoaded(this.state.notifications))}}]),n}(r.a.Component),Mn=(n(1597),n(412)),_n=function(e){!function(e){e.forEach((function(e){var t=new FileReader;t.onload=function(){var e,n,a=t.result;try{var r=!0;e=a,n=function(e){e.forEach((function(e){r=function(e){try{return H(e),!0}catch(t){return!1}}(e)&&r})),r&&e.length},Object(Mn.parseGpx)(e,(function(e,t){var a=[];return t.tracks.forEach((function(e){var t=function(e){var t=function(e){var t=[];return e.segments.forEach((function(e){e.forEach((function(e){t.push(new y(e.lat,e.lon))}))})),t}(e);return new w(e.name,t)}(e);a.push(t)})),n(a)}))}catch(o){console.log("error: "+o)}},t.readAsText(e)}))}(e)};var Gn=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"bodyGpx"},r.a.createElement(ue,{pageWrapId:"page-wrap",container:"gpxPage"}),r.a.createElement("div",{className:"App gpx",id:"page-wrap"},r.a.createElement("div",{ref:function(t){return e.node=t},className:"gpxCard"},r.a.createElement("div",{className:"GpxZone"},r.a.createElement(qe,{hideUpload:function(){},onUpload:function(e){_n(e)},onFilesAdded:function(){}})))))}}]),n}(r.a.Component),Wn=(n(736),function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).handleSession=function(){a.props.history.push("/login")},a.viewLoaded=function(e){return r.a.createElement("div",{className:"bodyFriends",id:"outer-container"},r.a.createElement("main",null,r.a.createElement(ue,{pageWrapId:"page-wrap",container:"outer-container"}),r.a.createElement("div",{className:"App friends",id:"page-wrap"},r.a.createElement("div",{className:"backList"},r.a.createElement(p.a,null,r.a.createElement(p.b,{to:"/creategroup"},"Create Group"))),r.a.createElement("section",{className:"sectionFriends"},r.a.createElement("h1",null,"List of Groups"),r.a.createElement("ul",{className:"listgroups"},e.map((function(t,n){return r.a.createElement("li",{id:"group"+n,key:n,className:"liCard"},r.a.createElement(Pt,{header:t.name,image:"https://www.pngitem.com/pimgs/m/4-49786_people-people-icon-png-file-transparent-png.png",link:"/groupdetails",className:"linkRoute",action:function(t){a.selectDetails(t,e[n])},iconName:"users",popupContent:"View group members"}))})))))))},a.state={loading:!0,groups:[]},a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=this;vt.getGroups(this.handleSession).then((function(t){e.setState({loading:!1,groups:t}),vt.setGroups(t)}))}},{key:"selectDetails",value:function(){var e=Object(b.a)(v.a.mark((function e(t,n){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=[],n.users.map((function(e,t){var n={name:"",url:"",photo:""};n.url=e.url,a.push(n)})),vt.setGroupSelected(a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.loading;return r.a.createElement(r.a.Fragment,null,e?r.a.createElement(Ve,null):this.viewLoaded(this.state.groups))}}]),n}(r.a.Component)),Jn=[],Bn=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).handleSession=function(){a.props.history.push("/login")},a.viewLoaded=function(e){return r.a.createElement("div",{className:"bodyFriends",id:"outer-container"},r.a.createElement("main",null,r.a.createElement(ue,{pageWrapId:"page-wrap",container:"outer-container"}),r.a.createElement("div",{className:"App friends",id:"page-wrap"},r.a.createElement("div",{className:"backList"},r.a.createElement(p.a,null,r.a.createElement(p.b,{to:"/groups"},"List Groups"))),r.a.createElement("section",{className:"sectionFriends"},r.a.createElement("h1",null,"List of Members of Group:"),r.a.createElement("ul",{className:"listgroups"},Jn.map((function(t,n){if(e.some((function(e){return e.url===t.webIdString})))return r.a.createElement("li",{id:"group"+n,key:n,className:"liCard"},r.a.createElement(Pt,{image:t.profilePicture,header:t.name,description:t.webIdString,externalLink:t.webIdString,externalIconName:"user",externalPopupContent:"Go to profile"}))})))))))},a.state={loading:!0,group:{users:[{name:"",url:""}]},friends:[]},a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=this;Jn=bt.getFriends(),vt.getGroupSelected(this.handleSession).then((function(t){e.setState({loading:!1,group:t})}))}},{key:"render",value:function(){var e=this.state.loading;return r.a.createElement(r.a.Fragment,null,e?r.a.createElement(Ve,null):this.viewLoaded(this.state.group))}}]),n}(r.a.Component),Vn=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).state={selected:!1},a}return Object(c.a)(n,[{key:"executeAction",value:function(){(0,this.props.onClick)()}},{key:"render",value:function(){var e=this,t=this.state.selected;return r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:this.props.className,name:this.props.name,onClick:function(){e.executeAction(),e.setState({selected:!e.state.selected})}},this.props.message),t?r.a.createElement("span",{className:"spanselected fas fa fa-check","aria-hidden":"true"}):r.a.createElement("span",{className:"spanselected fa fa-times","aria-hidden":"true"}," "))}}]),n}(a.Component),Hn=(n(1617),[]),zn=[],Yn=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).viewLoaded=function(e){return r.a.createElement("div",{className:"bodyFriends",id:"outer-container"},r.a.createElement("main",null,r.a.createElement(ue,{pageWrapId:"page-wrap",container:"outer-container"}),r.a.createElement("div",{className:"App friends",id:"page-wrap"},r.a.createElement("div",{className:"backList"},r.a.createElement(p.a,null,r.a.createElement(p.b,{to:"/groups"},"List Groups"))),r.a.createElement("section",{className:"sectionFriends"},r.a.createElement("h1",{className:"headerGroup"},"Create a Group of Friends"),r.a.createElement("div",{className:"createGroup"},r.a.createElement("section",{className:"selectMembersSection"},r.a.createElement("label",null,"Select Members"),r.a.createElement("ul",{className:"listgroups"},e.map((function(t,n){return r.a.createElement("li",{id:"group"+n,key:n,className:"liCard"},r.a.createElement("div",{className:"itemgroup"},r.a.createElement(Vn,{className:"itemelement",message:t.name,onClick:function(){a.manageFriendsToGroup(e[n].webIdString)}})))})))),r.a.createElement("section",{className:"saveSection"},r.a.createElement("label",{htmlFor:"textInput"},"Group Name"),r.a.createElement("br",null),r.a.createElement("input",{className:"textInput",type:"text",onChange:a.nameToGroup.bind(Object(Ye.a)(a))}),r.a.createElement("form",null,r.a.createElement(f,{className:"submitGroup",message:"Save Group",onClick:function(){ht(a.getFriendsToGroup(),a.state.nameGroup),window.location.reload()}}))))))))},Hn=bt.getFriends(),a.state={loading:!1,friends:[],nameGroup:""},a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){}},{key:"manageFriendsToGroup",value:function(e){var t=zn.length;(zn=zn.filter((function(t){return t.url!==e}))).length==t&&zn.push({url:e})}},{key:"getFriendsToGroup",value:function(){return zn}},{key:"nameToGroup",value:function(e){this.setState({nameGroup:e.target.value})}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,this.viewLoaded(Hn))}}]),n}(r.a.Component),Xn=n(1618),qn=n(30),Zn=Xn.AclApi,$n=Xn.Permissions,Kn=Xn.Agents,Qn=$n.READ,ea=$n.WRITE,ta=$n.APPEND,na=$n.CONTROL;function aa(e,t,n,a){return ra.apply(this,arguments)}function ra(){return(ra=Object(b.a)(v.a.mark((function e(t,n,a,r){var o,s,i,c,l,u;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=la(t),s=qn.fetch.bind(qn),i=new Zn(s,{autoSave:!0}),e.prev=3,e.next=6,i.loadFromFileUrl(n);case 6:return c=e.sent,(l=new $n).add(o),(u=new Kn).addWebId(a),e.prev=11,e.next=14,c.addRule(l,u);case 14:e.next=21;break;case 16:return e.prev=16,e.t0=e.catch(11),console.error("The permission could not be added"),console.error(e.t0),e.abrupt("return",!1);case 21:e.next=28;break;case 23:return e.prev=23,e.t1=e.catch(3),console.log("The acl of the route was not yet created"),console.log(e.t1),e.abrupt("return",!1);case 28:case"end":return e.stop()}}),e,null,[[3,23],[11,16]])})))).apply(this,arguments)}function oa(e,t,n){return sa.apply(this,arguments)}function sa(){return(sa=Object(b.a)(v.a.mark((function e(t,n,a){var r,o,s,i,c,l;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=qn.fetch.bind(qn),o=new Zn(r,{autoSave:!0}),e.next=4,o.loadFromFileUrl(a);case 4:return s=e.sent,i=la(t),c=s.getPermissionsFor(n),l=c.permissions,e.abrupt("return",l.has(i));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ia(e,t,n){return ca.apply(this,arguments)}function ca(){return(ca=Object(b.a)(v.a.mark((function e(t,n,a){var r,o,s,i,c,l;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=la("READ"),o=qn.fetch.bind(qn),s=new Zn(o,{autoSave:!0}),e.prev=3,e.next=6,s.loadFromFileUrl(t);case 6:return i=e.sent,(c=new $n).add(r),r=la("WRITE"),c.add(r),(l=new Kn).addWebId(n),e.prev=13,e.next=16,i.addRule(c,l);case 16:e.next=23;break;case 18:return e.prev=18,e.t0=e.catch(13),console.error("The permission could not be added"),console.error(e.t0),e.abrupt("return",!1);case 23:e.next=30;break;case 25:return e.prev=25,e.t1=e.catch(3),console.log("The acl of the route was not yet created"),console.log(e.t1),e.abrupt("return",!1);case 30:case"end":return e.stop()}}),e,null,[[3,25],[13,18]])})))).apply(this,arguments)}function la(e){switch(e){case"READ":return Qn;case"WRITE":return ea;case"APPEND":return ta;case"CONTROL":return na;default:return"The format is wrong"}}var ua=n(437);function pa(e,t,n){return ma.apply(this,arguments)}function ma(){return(ma=Object(b.a)(v.a.mark((function e(t,n,a){var r,o,s,i,c,l,u,p,m,d,f,h,g,b,y,w;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.substring(0,a.length-16),r+="/",o=n.substring(0,n.length-16),o+="/",s=t.split("/"),i=s[s.length-1],console.log("AAAAAAAAAAAAAAAAAAAAAAAAAA"),da(t,i),e.next=10,oa("READ",n,t);case 10:if(e.sent){e.next=33;break}return aa("READ",t,n),e.next=15,Qt(t);case 15:if(null!==(c=e.sent)&&void 0!==c&&null!==c.files&&void 0!==c.files&&null!==c.files[0]&&void 0!==c.files[0]&&void 0!=(l=c.files[0].files)&&null!=l)for(u=0;u<l.length;u++)p=l[u].filePath,m=p.split("/"),d=m[m.length-1],fa(p,d),aa("READ",p,n);r+"viade/comments/"+i;try{f=i.split("."),h=f[f.length-2]+"Comments."+f[f.length-1],ha(g=r+"viade/comments/"+h,h),ia(g,n)}catch(v){console.log("The other user has not the file for the comments or not the specific format that this app uses")}return b=Pn(r,t,0,new Date),y=Object(ua.a)(),w=An("Announce","ROUTE",o,b.toString(),new Date,y),e.prev=22,Fn(o,w,y).then().catch((function(e){return re.c.error("The user "+o+" do not have an inbox with the correct specifications",{draggable:!0,position:re.c.POSITION.TOP_CENTER})})),e.abrupt("return",!0);case 27:return e.prev=27,e.t0=e.catch(22),re.c.error("We could not post the notification in the other user's inbox",{draggable:!0,position:re.c.POSITION.TOP_CENTER}),e.abrupt("return",!1);case 31:e.next=35;break;case 33:return re.c.warn("This route was already shared",{draggable:!0,position:re.c.POSITION.TOP_CENTER}),e.abrupt("return",!1);case 35:case"end":return e.stop()}}),e,null,[[22,27]])})))).apply(this,arguments)}function da(e,t){var a=n(30);new(n(48))(a).itemExists(e).then().catch((function(e){}))||j(e,t)}function fa(e,t){var a=n(30);new(n(48))(a).itemExists(e).then().catch((function(e){}))||C(e,t)}function ha(e,t){var a=n(30);new(n(48))(a).itemExists(e).then().catch((function(e){}))||F(e,t)}n(1619);var ga=[],va=[],ba=(n(30),"");var ya=function(){return ga=bt.getFriends(),va=vt.getLoadedGroups(),console.log(va),ba=JSON.parse(localStorage.getItem("session")),r.a.createElement("div",{className:"bodyFriends",id:"outer-container"},r.a.createElement("main",null,r.a.createElement(ue,{pageWrapId:"page-wrap",container:"outer-container"}),r.a.createElement("div",{className:"App friends",id:"page-wrap"},r.a.createElement("section",null,r.a.createElement("div",{className:"loginButton"},r.a.createElement("div",{className:"dropdown shareList"},r.a.createElement("h1",null,">Share with friends"),r.a.createElement("div",{className:"dropdown-content shareContent"},r.a.createElement("ul",{className:"sectionFriends"},ga.map((function(e,t){return r.a.createElement("li",{id:"friend"+t,key:t,className:"liCard"},r.a.createElement(Pt,{image:e.profilePicture,header:e.name,description:e.webIdString,numberOfFriends:e.numberOfFriends,shareIconName:"share",shareAction:function(t){t.preventDefault(),re.c.info("Route successfully shared with "+e.name,{draggable:!0,position:re.c.POSITION.TOP_CENTER}),pa(We.getSelectedToShare(),e.webIdString,ba.webId)}}))})))))),r.a.createElement("div",{className:"loginButton"},r.a.createElement("div",{className:"dropdown shareList"},r.a.createElement("h1",null,">Share with Groups of friends"),r.a.createElement("div",{className:"dropdown-content shareContent"},r.a.createElement("ul",{className:"sectionFriends"},va.map((function(e,t){return console.log(e),r.a.createElement("li",{id:"friend"+t,key:t,className:"liCard"},r.a.createElement(Pt,{image:"images/userPictureUndefined.png",header:e.name,description:"Group of Friends",shareIconName:"share",shareAction:function(t){t.preventDefault(),re.c.info("Route successfully shared with "+e.name,{draggable:!0,position:re.c.POSITION.TOP_CENTER}),e.users.map((function(e){console.log(e),pa(We.getSelectedToShare(),e.url,ba.webId)}))}}))}))))))))))},wa=(n(1620),function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).handleSession=function(){a.props.history.push("/home")},a.state={render:0},a}return Object(c.a)(n,[{key:"render",value:function(){var e=this;return setTimeout((function(){0===e.state.render&&e.setState({render:1})}),5e3),window.performance&&1==window.performance.navigation.type&&"/"!=window.location.href.charAt(window.location.href.length-1)?r.a.createElement(p.a,null,r.a.createElement(m.a,{to:"/"})):this.state.render>0?r.a.createElement(a.Fragment,null,r.a.createElement(re.b,{closeOnClick:!0,draggable:!0,transition:re.a,autoClose:3200}),r.a.createElement(p.a,null,r.a.createElement(a.Fragment,null,r.a.createElement(m.d,null,r.a.createElement(m.b,{exact:!0,path:"/",component:xt}),r.a.createElement(m.b,{exact:!0,path:"/login",component:Ct}),r.a.createElement(m.b,{exact:!0,path:"/routes",component:mn}),r.a.createElement(m.b,{exact:!0,path:"/friends-list",component:Lt}),r.a.createElement(m.b,{exact:!0,path:"/upload",component:Ze}),r.a.createElement(m.b,{exact:!0,path:"/about",component:dn}),r.a.createElement(m.b,{exact:!0,path:"/notifications",component:Un}),r.a.createElement(m.b,{exact:!0,path:"/saveroute",component:Ke}),r.a.createElement(m.b,{exact:!0,path:"/gpx",component:Gn}),r.a.createElement(m.b,{exact:!0,path:"/groups",component:Wn}),r.a.createElement(m.b,{exact:!0,path:"/groupdetails",component:Bn}),r.a.createElement(m.b,{exact:!0,path:"/creategroup",component:Yn}),r.a.createElement(m.b,{exact:!0,path:"/shareroute",component:ya}))))):r.a.createElement(a.Fragment,null,r.a.createElement("video",{id:"viadegif",autoPlay:!0,muted:!0},r.a.createElement("source",{src:"videos/ViaDe.mp4",type:"video/mp4"})))}}]),n}(a.Component));s.a.render(r.a.createElement(wa,null),document.getElementById("root"))},238:function(e,t,n){},598:function(e,t,n){},599:function(e,t,n){},661:function(e,t,n){},736:function(e,t,n){},778:function(e,t,n){e.exports=n(1621)},783:function(e,t,n){},818:function(e,t){},820:function(e,t){},844:function(e,t){},891:function(e,t){},892:function(e,t){}},[[778,1,2]]]);
//# sourceMappingURL=main.f9eed44f.chunk.js.map